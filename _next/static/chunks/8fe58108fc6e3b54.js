(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,88143,(e,t,l)=>{"use strict";function a({widthInt:e,heightInt:t,blurWidth:l,blurHeight:a,blurDataURL:r,objectFit:s}){let n=l?40*l:e,o=a?40*a:t,i=n&&o?`viewBox='0 0 ${n} ${o}'`:"";return`%3Csvg xmlns='http://www.w3.org/2000/svg' ${i}%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='${i?"none":"contain"===s?"xMidYMid":"cover"===s?"xMidYMid slice":"none"}' style='filter: url(%23b);' href='${r}'/%3E%3C/svg%3E`}Object.defineProperty(l,"__esModule",{value:!0}),Object.defineProperty(l,"getImageBlurSvg",{enumerable:!0,get:function(){return a}})},87690,(e,t,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var a={VALID_LOADERS:function(){return s},imageConfigDefault:function(){return n}};for(var r in a)Object.defineProperty(l,r,{enumerable:!0,get:a[r]});let s=["default","imgix","cloudinary","akamai","custom"],n={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:14400,formats:["image/webp"],maximumRedirects:3,maximumResponseBody:5e7,dangerouslyAllowLocalIP:!1,dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"attachment",localPatterns:void 0,remotePatterns:[],qualities:[75],unoptimized:!1}},8927,(e,t,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),Object.defineProperty(l,"getImgProps",{enumerable:!0,get:function(){return d}}),e.r(33525);let a=e.r(43369),r=e.r(88143),s=e.r(87690),n=["-moz-initial","fill","none","scale-down",void 0];function o(e){return void 0!==e.default}function i(e){return void 0===e?e:"number"==typeof e?Number.isFinite(e)?e:NaN:"string"==typeof e&&/^[0-9]+$/.test(e)?parseInt(e,10):NaN}function d({src:e,sizes:t,unoptimized:l=!1,priority:d=!1,preload:c=!1,loading:u,className:p,quality:m,width:x,height:f,fill:b=!1,style:h,overrideSrc:g,onLoad:v,onLoadingComplete:y,placeholder:j="empty",blurDataURL:N,fetchPriority:w,decoding:k="async",layout:C,objectFit:S,objectPosition:E,lazyBoundary:I,lazyRoot:T,...$},D){var P;let M,O,_,{imgConf:A,showAltText:L,blurComplete:R,defaultLoader:z}=D,B=A||s.imageConfigDefault;if("allSizes"in B)M=B;else{let e=[...B.deviceSizes,...B.imageSizes].sort((e,t)=>e-t),t=B.deviceSizes.sort((e,t)=>e-t),l=B.qualities?.sort((e,t)=>e-t);M={...B,allSizes:e,deviceSizes:t,qualities:l}}if(void 0===z)throw Object.defineProperty(Error("images.loaderFile detected but the file is missing default export.\nRead more: https://nextjs.org/docs/messages/invalid-images-config"),"__NEXT_ERROR_CODE",{value:"E163",enumerable:!1,configurable:!0});let F=$.loader||z;delete $.loader,delete $.srcSet;let U="__next_img_default"in F;if(U){if("custom"===M.loader)throw Object.defineProperty(Error(`Image with src "${e}" is missing "loader" prop.
Read more: https://nextjs.org/docs/messages/next-image-missing-loader`),"__NEXT_ERROR_CODE",{value:"E252",enumerable:!1,configurable:!0})}else{let e=F;F=t=>{let{config:l,...a}=t;return e(a)}}if(C){"fill"===C&&(b=!0);let e={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[C];e&&(h={...h,...e});let l={responsive:"100vw",fill:"100vw"}[C];l&&!t&&(t=l)}let G="",H=i(x),W=i(f);if((P=e)&&"object"==typeof P&&(o(P)||void 0!==P.src)){let t=o(e)?e.default:e;if(!t.src)throw Object.defineProperty(Error(`An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received ${JSON.stringify(t)}`),"__NEXT_ERROR_CODE",{value:"E460",enumerable:!1,configurable:!0});if(!t.height||!t.width)throw Object.defineProperty(Error(`An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received ${JSON.stringify(t)}`),"__NEXT_ERROR_CODE",{value:"E48",enumerable:!1,configurable:!0});if(O=t.blurWidth,_=t.blurHeight,N=N||t.blurDataURL,G=t.src,!b)if(H||W){if(H&&!W){let e=H/t.width;W=Math.round(t.height*e)}else if(!H&&W){let e=W/t.height;H=Math.round(t.width*e)}}else H=t.width,W=t.height}let q=!d&&!c&&("lazy"===u||void 0===u);(!(e="string"==typeof e?e:G)||e.startsWith("data:")||e.startsWith("blob:"))&&(l=!0,q=!1),M.unoptimized&&(l=!0),U&&!M.dangerouslyAllowSVG&&e.split("?",1)[0].endsWith(".svg")&&(l=!0);let J=i(m),V=Object.assign(b?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:S,objectPosition:E}:{},L?{}:{color:"transparent"},h),X=R||"empty"===j?null:"blur"===j?`url("data:image/svg+xml;charset=utf-8,${(0,r.getImageBlurSvg)({widthInt:H,heightInt:W,blurWidth:O,blurHeight:_,blurDataURL:N||"",objectFit:V.objectFit})}")`:`url("${j}")`,K=n.includes(V.objectFit)?"fill"===V.objectFit?"100% 100%":"cover":V.objectFit,Y=X?{backgroundSize:K,backgroundPosition:V.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:X}:{},Q=function({config:e,src:t,unoptimized:l,width:r,quality:s,sizes:n,loader:o}){if(l){let e=(0,a.getDeploymentId)();if(t.startsWith("/")&&!t.startsWith("//")&&e){let l=t.includes("?")?"&":"?";t=`${t}${l}dpl=${e}`}return{src:t,srcSet:void 0,sizes:void 0}}let{widths:i,kind:d}=function({deviceSizes:e,allSizes:t},l,a){if(a){let l=/(^|\s)(1?\d?\d)vw/g,r=[];for(let e;e=l.exec(a);)r.push(parseInt(e[2]));if(r.length){let l=.01*Math.min(...r);return{widths:t.filter(t=>t>=e[0]*l),kind:"w"}}return{widths:t,kind:"w"}}return"number"!=typeof l?{widths:e,kind:"w"}:{widths:[...new Set([l,2*l].map(e=>t.find(t=>t>=e)||t[t.length-1]))],kind:"x"}}(e,r,n),c=i.length-1;return{sizes:n||"w"!==d?n:"100vw",srcSet:i.map((l,a)=>`${o({config:e,src:t,quality:s,width:l})} ${"w"===d?l:a+1}${d}`).join(", "),src:o({config:e,src:t,quality:s,width:i[c]})}}({config:M,src:e,unoptimized:l,width:H,quality:J,sizes:t,loader:F}),Z=q?"lazy":u;return{props:{...$,loading:Z,fetchPriority:w,width:H,height:W,decoding:k,className:p,style:{...V,...Y},sizes:Q.sizes,srcSet:Q.srcSet,src:g||Q.src},meta:{unoptimized:l,preload:c||d,placeholder:j,fill:b}}}},98879,(e,t,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),Object.defineProperty(l,"default",{enumerable:!0,get:function(){return o}});let a=e.r(71645),r="u"<typeof window,s=r?()=>{}:a.useLayoutEffect,n=r?()=>{}:a.useEffect;function o(e){let{headManager:t,reduceComponentsToState:l}=e;function o(){if(t&&t.mountedInstances){let e=a.Children.toArray(Array.from(t.mountedInstances).filter(Boolean));t.updateHead(l(e))}}return r&&(t?.mountedInstances?.add(e.children),o()),s(()=>(t?.mountedInstances?.add(e.children),()=>{t?.mountedInstances?.delete(e.children)})),s(()=>(t&&(t._pendingUpdate=o),()=>{t&&(t._pendingUpdate=o)})),n(()=>(t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null),()=>{t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null)})),null}},25633,(e,t,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var a={default:function(){return f},defaultHead:function(){return u}};for(var r in a)Object.defineProperty(l,r,{enumerable:!0,get:a[r]});let s=e.r(55682),n=e.r(90809),o=e.r(43476),i=n._(e.r(71645)),d=s._(e.r(98879)),c=e.r(42732);function u(){return[(0,o.jsx)("meta",{charSet:"utf-8"},"charset"),(0,o.jsx)("meta",{name:"viewport",content:"width=device-width"},"viewport")]}function p(e,t){return"string"==typeof t||"number"==typeof t?e:t.type===i.default.Fragment?e.concat(i.default.Children.toArray(t.props.children).reduce((e,t)=>"string"==typeof t||"number"==typeof t?e:e.concat(t),[])):e.concat(t)}e.r(33525);let m=["name","httpEquiv","charSet","itemProp"];function x(e){let t,l,a,r;return e.reduce(p,[]).reverse().concat(u().reverse()).filter((t=new Set,l=new Set,a=new Set,r={},e=>{let s=!0,n=!1;if(e.key&&"number"!=typeof e.key&&e.key.indexOf("$")>0){n=!0;let l=e.key.slice(e.key.indexOf("$")+1);t.has(l)?s=!1:t.add(l)}switch(e.type){case"title":case"base":l.has(e.type)?s=!1:l.add(e.type);break;case"meta":for(let t=0,l=m.length;t<l;t++){let l=m[t];if(e.props.hasOwnProperty(l))if("charSet"===l)a.has(l)?s=!1:a.add(l);else{let t=e.props[l],a=r[l]||new Set;("name"!==l||!n)&&a.has(t)?s=!1:(a.add(t),r[l]=a)}}}return s})).reverse().map((e,t)=>{let l=e.key||t;return i.default.cloneElement(e,{key:l})})}let f=function({children:e}){let t=(0,i.useContext)(c.HeadManagerContext);return(0,o.jsx)(d.default,{reduceComponentsToState:x,headManager:t,children:e})};("function"==typeof l.default||"object"==typeof l.default&&null!==l.default)&&void 0===l.default.__esModule&&(Object.defineProperty(l.default,"__esModule",{value:!0}),Object.assign(l.default,l),t.exports=l.default)},18556,(e,t,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),Object.defineProperty(l,"ImageConfigContext",{enumerable:!0,get:function(){return s}});let a=e.r(55682)._(e.r(71645)),r=e.r(87690),s=a.default.createContext(r.imageConfigDefault)},65856,(e,t,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),Object.defineProperty(l,"RouterContext",{enumerable:!0,get:function(){return a}});let a=e.r(55682)._(e.r(71645)).default.createContext(null)},70965,(e,t,l)=>{"use strict";function a(e,t){let l=e||75;return t?.qualities?.length?t.qualities.reduce((e,t)=>Math.abs(t-l)<Math.abs(e-l)?t:e,0):l}Object.defineProperty(l,"__esModule",{value:!0}),Object.defineProperty(l,"findClosestQuality",{enumerable:!0,get:function(){return a}})},1948,(e,t,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),Object.defineProperty(l,"default",{enumerable:!0,get:function(){return n}});let a=e.r(70965),r=e.r(43369);function s({config:e,src:t,width:l,quality:s}){if(t.startsWith("/")&&t.includes("?")&&e.localPatterns?.length===1&&"**"===e.localPatterns[0].pathname&&""===e.localPatterns[0].search)throw Object.defineProperty(Error(`Image with src "${t}" is using a query string which is not configured in images.localPatterns.
Read more: https://nextjs.org/docs/messages/next-image-unconfigured-localpatterns`),"__NEXT_ERROR_CODE",{value:"E871",enumerable:!1,configurable:!0});let n=(0,a.findClosestQuality)(s,e),o=(0,r.getDeploymentId)();return`${e.path}?url=${encodeURIComponent(t)}&w=${l}&q=${n}${t.startsWith("/")&&o?`&dpl=${o}`:""}`}s.__next_img_default=!0;let n=s},18581,(e,t,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),Object.defineProperty(l,"useMergedRef",{enumerable:!0,get:function(){return r}});let a=e.r(71645);function r(e,t){let l=(0,a.useRef)(null),r=(0,a.useRef)(null);return(0,a.useCallback)(a=>{if(null===a){let e=l.current;e&&(l.current=null,e());let t=r.current;t&&(r.current=null,t())}else e&&(l.current=s(e,a)),t&&(r.current=s(t,a))},[e,t])}function s(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let l=e(t);return"function"==typeof l?l:()=>e(null)}}("function"==typeof l.default||"object"==typeof l.default&&null!==l.default)&&void 0===l.default.__esModule&&(Object.defineProperty(l.default,"__esModule",{value:!0}),Object.assign(l.default,l),t.exports=l.default)},5500,(e,t,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),Object.defineProperty(l,"Image",{enumerable:!0,get:function(){return y}});let a=e.r(55682),r=e.r(90809),s=e.r(43476),n=r._(e.r(71645)),o=a._(e.r(74080)),i=a._(e.r(25633)),d=e.r(8927),c=e.r(87690),u=e.r(18556);e.r(33525);let p=e.r(65856),m=a._(e.r(1948)),x=e.r(18581),f={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/memories/_next/image/",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0};function b(e,t,l,a,r,s,n){let o=e?.src;e&&e["data-loaded-src"]!==o&&(e["data-loaded-src"]=o,("decode"in e?e.decode():Promise.resolve()).catch(()=>{}).then(()=>{if(e.parentElement&&e.isConnected){if("empty"!==t&&r(!0),l?.current){let t=new Event("load");Object.defineProperty(t,"target",{writable:!1,value:e});let a=!1,r=!1;l.current({...t,nativeEvent:t,currentTarget:e,target:e,isDefaultPrevented:()=>a,isPropagationStopped:()=>r,persist:()=>{},preventDefault:()=>{a=!0,t.preventDefault()},stopPropagation:()=>{r=!0,t.stopPropagation()}})}a?.current&&a.current(e)}}))}function h(e){return n.use?{fetchPriority:e}:{fetchpriority:e}}"u"<typeof window&&(globalThis.__NEXT_IMAGE_IMPORTED=!0);let g=(0,n.forwardRef)(({src:e,srcSet:t,sizes:l,height:a,width:r,decoding:o,className:i,style:d,fetchPriority:c,placeholder:u,loading:p,unoptimized:m,fill:f,onLoadRef:g,onLoadingCompleteRef:v,setBlurComplete:y,setShowAltText:j,sizesInput:N,onLoad:w,onError:k,...C},S)=>{let E=(0,n.useCallback)(e=>{e&&(k&&(e.src=e.src),e.complete&&b(e,u,g,v,y,m,N))},[e,u,g,v,y,k,m,N]),I=(0,x.useMergedRef)(S,E);return(0,s.jsx)("img",{...C,...h(c),loading:p,width:r,height:a,decoding:o,"data-nimg":f?"fill":"1",className:i,style:d,sizes:l,srcSet:t,src:e,ref:I,onLoad:e=>{b(e.currentTarget,u,g,v,y,m,N)},onError:e=>{j(!0),"empty"!==u&&y(!0),k&&k(e)}})});function v({isAppRouter:e,imgAttributes:t}){let l={as:"image",imageSrcSet:t.srcSet,imageSizes:t.sizes,crossOrigin:t.crossOrigin,referrerPolicy:t.referrerPolicy,...h(t.fetchPriority)};return e&&o.default.preload?(o.default.preload(t.src,l),null):(0,s.jsx)(i.default,{children:(0,s.jsx)("link",{rel:"preload",href:t.srcSet?void 0:t.src,...l},"__nimg-"+t.src+t.srcSet+t.sizes)})}let y=(0,n.forwardRef)((e,t)=>{let l=(0,n.useContext)(p.RouterContext),a=(0,n.useContext)(u.ImageConfigContext),r=(0,n.useMemo)(()=>{let e=f||a||c.imageConfigDefault,t=[...e.deviceSizes,...e.imageSizes].sort((e,t)=>e-t),l=e.deviceSizes.sort((e,t)=>e-t),r=e.qualities?.sort((e,t)=>e-t);return{...e,allSizes:t,deviceSizes:l,qualities:r,localPatterns:"u"<typeof window?a?.localPatterns:e.localPatterns}},[a]),{onLoad:o,onLoadingComplete:i}=e,x=(0,n.useRef)(o);(0,n.useEffect)(()=>{x.current=o},[o]);let b=(0,n.useRef)(i);(0,n.useEffect)(()=>{b.current=i},[i]);let[h,y]=(0,n.useState)(!1),[j,N]=(0,n.useState)(!1),{props:w,meta:k}=(0,d.getImgProps)(e,{defaultLoader:m.default,imgConf:r,blurComplete:h,showAltText:j});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g,{...w,unoptimized:k.unoptimized,placeholder:k.placeholder,fill:k.fill,onLoadRef:x,onLoadingCompleteRef:b,setBlurComplete:y,setShowAltText:N,sizesInput:e.sizes,ref:t}),k.preload?(0,s.jsx)(v,{isAppRouter:!l,imgAttributes:w}):null]})});("function"==typeof l.default||"object"==typeof l.default&&null!==l.default)&&void 0===l.default.__esModule&&(Object.defineProperty(l.default,"__esModule",{value:!0}),Object.assign(l.default,l),t.exports=l.default)},94909,(e,t,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var a={default:function(){return c},getImageProps:function(){return d}};for(var r in a)Object.defineProperty(l,r,{enumerable:!0,get:a[r]});let s=e.r(55682),n=e.r(8927),o=e.r(5500),i=s._(e.r(1948));function d(e){let{props:t}=(0,n.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/memories/_next/image/",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,l]of Object.entries(t))void 0===l&&delete t[e];return{props:t}}let c=o.Image},57688,(e,t,l)=>{t.exports=e.r(94909)},67585,(e,t,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),Object.defineProperty(l,"BailoutToCSR",{enumerable:!0,get:function(){return r}});let a=e.r(32061);function r({reason:e,children:t}){if("u"<typeof window)throw Object.defineProperty(new a.BailoutToCSRError(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return t}},9885,(e,t,l)=>{"use strict";function a(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(l,"__esModule",{value:!0}),Object.defineProperty(l,"encodeURIPath",{enumerable:!0,get:function(){return a}})},52157,(e,t,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),Object.defineProperty(l,"PreloadChunks",{enumerable:!0,get:function(){return i}});let a=e.r(43476),r=e.r(74080),s=e.r(63599),n=e.r(9885),o=e.r(43369);function i({moduleIds:e}){if("u">typeof window)return null;let t=s.workAsyncStorage.getStore();if(void 0===t)return null;let l=[];if(t.reactLoadableManifest&&e){let a=t.reactLoadableManifest;for(let t of e){if(!a[t])continue;let e=a[t].files;l.push(...e)}}if(0===l.length)return null;let i=(0,o.getDeploymentIdQueryOrEmptyString)();return(0,a.jsx)(a.Fragment,{children:l.map(e=>{let l=`${t.assetPrefix}/_next/${(0,n.encodeURIPath)(e)}${i}`;return e.endsWith(".css")?(0,a.jsx)("link",{precedence:"dynamic",href:l,rel:"stylesheet",as:"style",nonce:t.nonce},e):((0,r.preload)(l,{as:"script",fetchPriority:"low",nonce:t.nonce}),null)})})}},69093,(e,t,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),Object.defineProperty(l,"default",{enumerable:!0,get:function(){return d}});let a=e.r(43476),r=e.r(71645),s=e.r(67585),n=e.r(52157);function o(e){return{default:e&&"default"in e?e.default:e}}let i={loader:()=>Promise.resolve(o(()=>null)),loading:null,ssr:!0},d=function(e){let t={...i,...e},l=(0,r.lazy)(()=>t.loader().then(o)),d=t.loading;function c(e){let o=d?(0,a.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,i=!t.ssr||!!t.loading,c=i?r.Suspense:r.Fragment,u=t.ssr?(0,a.jsxs)(a.Fragment,{children:["u"<typeof window?(0,a.jsx)(n.PreloadChunks,{moduleIds:t.modules}):null,(0,a.jsx)(l,{...e})]}):(0,a.jsx)(s.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(l,{...e})});return(0,a.jsx)(c,{...i?{fallback:o}:{},children:u})}return c.displayName="LoadableComponent",c}},70703,(e,t,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),Object.defineProperty(l,"default",{enumerable:!0,get:function(){return r}});let a=e.r(55682)._(e.r(69093));function r(e,t){let l={};"function"==typeof e&&(l.loader=e);let r={...l,...t};return(0,a.default)({...r,modules:r.loadableGenerated?.modules})}("function"==typeof l.default||"object"==typeof l.default&&null!==l.default)&&void 0===l.default.__esModule&&(Object.defineProperty(l.default,"__esModule",{value:!0}),Object.assign(l.default,l),t.exports=l.default)},52683,e=>{"use strict";e.i(47167);var t=e.i(43476),l=e.i(57688),a=e.i(74080),r=e.i(71645);let s=({content:e,setContent:l,resolveText:a,updateOverride:r,displayEffectClass:s,labelEffectClass:n,bodyEffectClass:o,EditableText:i})=>(0,t.jsx)("section",{id:"about",className:"mt-20 paper-card p-8",children:(0,t.jsxs)("div",{className:"grid gap-6 lg:grid-cols-[1.1fr_0.9fr]",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(i,{as:"p",value:a("section.about","about"),onChange:e=>r("section.about",e),className:`font-ui text-xs uppercase tracking-[0.25em] text-[color:var(--muted)] ${n}`}),(0,t.jsx)(i,{as:"h3",value:e.aboutTitle,onChange:e=>l(t=>({...t,aboutTitle:e})),className:`font-display text-3xl ${s}`}),(0,t.jsx)(i,{as:"p",value:e.aboutBody,onChange:e=>l(t=>({...t,aboutBody:e})),multiline:!0,className:`text-base text-[color:var(--ink)]/80 ${o}`})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(i,{as:"p",value:e.contactLabel,onChange:e=>l(t=>({...t,contactLabel:e})),className:`font-ui text-xs uppercase tracking-[0.2em] text-[color:var(--olive)] ${n}`}),(0,t.jsx)(i,{as:"p",value:e.contactText,onChange:e=>l(t=>({...t,contactText:e})),multiline:!0,className:`text-base text-[color:var(--ink)]/80 ${o}`}),(0,t.jsx)("a",{className:"font-ui text-xs uppercase tracking-[0.25em] text-[color:var(--ink)]",href:`mailto:${e.contactEmail}`,children:(0,t.jsx)(i,{as:"span",value:e.contactEmail,onChange:e=>l(t=>({...t,contactEmail:e})),className:n})})]})]})}),n=(0,e.i(70703).default)(()=>e.A(55418),{loadableGenerated:{modules:[27850]},ssr:!1}),o=({albumTitle:e,items:l,onClose:a,resolveAssetSrc:s})=>{let o=(0,r.useRef)(null),i=(0,r.useRef)(null),[d,c]=(0,r.useState)(0),[u,p]=(0,r.useState)(!1),m=(0,r.useMemo)(()=>l.filter(e=>"image"===e.type),[l]),x=()=>o.current?.pageFlip(),f=()=>{if(u)return;let e=window.AudioContext||window.webkitAudioContext;if(!e)return;let t=i.current??new e;i.current=t;let l=t.sampleRate,a=Math.floor(.11*l),r=t.createBuffer(1,a,l),s=r.getChannelData(0);for(let e=0;e<a;e+=1){let t=Math.exp(-7*e/a);s[e]=(2*Math.random()-1)*t}let n=t.createBufferSource();n.buffer=r;let o=t.createBiquadFilter();o.type="bandpass",o.frequency.value=1200,o.Q.value=.6;let d=t.createGain();d.gain.value=1e-4;let c=t.currentTime;d.gain.exponentialRampToValueAtTime(.18,c+.012),d.gain.exponentialRampToValueAtTime(1e-4,c+.11),n.connect(o),o.connect(d),d.connect(t.destination),n.start(c),n.stop(c+.11)};return(0,r.useEffect)(()=>{let e=e=>{"Escape"===e.key?a():("ArrowLeft"===e.key&&(x()?.flipPrev("top"),f()),"ArrowRight"===e.key&&(x()?.flipNext("top"),f()))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),(0,t.jsx)("div",{className:"fixed inset-0 z-[85] bg-[color:var(--ink)]/85 p-4 sm:p-8",children:(0,t.jsxs)("div",{className:"mx-auto flex h-full w-full max-w-6xl flex-col rounded-2xl border border-[color:var(--muted)] bg-[color:var(--paper)] p-4 sm:p-6",children:[(0,t.jsxs)("div",{className:"mb-4 flex flex-wrap items-center justify-between gap-3",children:[(0,t.jsxs)("p",{className:"font-display text-xl text-[color:var(--ink)]",children:[e," 路 flip preview"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-3 py-2 text-xs uppercase tracking-[0.2em]",onClick:()=>p(e=>!e),children:u?"sound off":"sound on"}),(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-3 py-2 text-xs uppercase tracking-[0.2em]",onClick:a,children:"close"})]})]}),0===m.length?(0,t.jsx)("div",{className:"flex h-full items-center justify-center rounded-xl border border-[color:var(--muted)]/60 bg-[color:var(--paper-2)]/70",children:(0,t.jsx)("p",{className:"text-sm text-[color:var(--ink)]/70",children:"No image pages available in this album."})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex flex-1 items-center justify-center overflow-hidden rounded-xl border border-[color:var(--muted)]/50 bg-[color:var(--paper-2)]/70 p-2 sm:p-4",children:(0,t.jsx)(n,{ref:o,style:{margin:"0 auto"},startPage:0,width:420,height:560,minWidth:260,maxWidth:620,minHeight:360,maxHeight:860,size:"stretch",drawShadow:!0,maxShadowOpacity:.35,flippingTime:650,usePortrait:!0,startZIndex:0,autoSize:!0,showCover:!0,mobileScrollSupport:!0,clickEventForward:!0,useMouseEvents:!0,swipeDistance:30,showPageCorners:!0,disableFlipByClick:!1,onFlip:e=>{c("number"==typeof e?.data?e.data:0),f()},className:"",children:m.map(e=>(0,t.jsx)("div",{className:"h-full w-full bg-white",children:(0,t.jsx)("img",{src:s(e.src),alt:e.alt,className:"h-full w-full object-cover"})},e.id))})}),(0,t.jsxs)("div",{className:"mt-4 flex items-center justify-between gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-3 py-2 text-xs uppercase tracking-[0.2em]",onClick:()=>{x()?.flipPrev("top"),f()},children:"prev"}),(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-3 py-2 text-xs uppercase tracking-[0.2em]",onClick:()=>{x()?.flipNext("top"),f()},children:"next"})]}),(0,t.jsxs)("p",{className:"text-xs uppercase tracking-[0.2em] text-[color:var(--ink)]/60",children:["page ",Math.min(d+1,m.length)," / ",m.length]})]}),(0,t.jsx)("div",{className:"mt-3 flex gap-2 overflow-x-auto pb-1",children:m.map((e,l)=>(0,t.jsx)("button",{type:"button",className:`h-16 w-24 flex-shrink-0 overflow-hidden rounded-md border ${l===d?"border-[color:var(--accent)]":"border-[color:var(--muted)]/60"}`,onClick:()=>{x()?.flip(l,"top"),c(l),f()},"aria-label":`Jump to page ${l+1}`,children:(0,t.jsx)("img",{src:s(e.src),alt:e.alt,className:"h-full w-full object-cover"})},`flip-thumb-${e.id}`))})]})]})})},i=({content:e,setContent:a,albums:r,visibleAlbums:s,uploadsByAlbum:n,uploadCounts:o,albumMediaCounts:i,albumImageHeight:d,albumUploadThumbHeight:c,isEditMode:u,selectedAlbumId:p,resolveText:m,updateOverride:x,formatAlbumCount:f,updateAlbum:b,requestDeleteAlbum:h,requestDeleteUpload:g,openLightbox:v,handleFileDragOver:y,handleCoverDrop:j,handleCoverDragStart:N,addFiles:w,resolveAssetSrc:k,getMediaStyle:C,displayEffectClass:S,labelEffectClass:E,bodyEffectClass:I,EditableText:T,openFlipPreview:$})=>(0,t.jsxs)("section",{id:"albums",className:"mt-20",onDragOver:e=>{u&&e.preventDefault()},onDrop:e=>{u&&(e.preventDefault(),w(e.dataTransfer.files,p||r[0]?.id||""))},children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-end justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(T,{as:"p",value:m("section.albums","albums"),onChange:e=>x("section.albums",e),className:`font-ui text-xs uppercase tracking-[0.25em] text-[color:var(--muted)] ${E}`}),(0,t.jsx)(T,{as:"h3",value:e.albumsTitle,onChange:e=>a(t=>({...t,albumsTitle:e})),className:`font-display text-3xl ${S}`})]}),(0,t.jsx)("a",{className:"font-ui text-xs uppercase tracking-[0.25em] text-[color:var(--olive)]",href:"#albums",children:(0,t.jsx)(T,{as:"span",value:m("albums.viewAll","view all"),onChange:e=>x("albums.viewAll",e),className:E,editable:!1})})]}),(0,t.jsx)("div",{className:"mt-8 grid gap-6 md:grid-cols-2",children:s.map(e=>{let a,r,s,p=(n[e.id]?.filter(e=>"image"===e.type).length??0)>=2;return(0,t.jsxs)("article",{className:"paper-card p-6 transition-transform hover:-translate-y-1",children:[(a=e.coverId&&n[e.id]?n[e.id]?.find(t=>t.id===e.coverId):null,r=k("/media/album-winter-kitchen.svg"),s=k(e.src),(0,t.jsx)("div",{className:"relative",onDragOver:y,onDrop:t=>j(t,e.id),children:(0,t.jsx)("button",{type:"button",onClick:()=>{if(!u&&p)return void $(e.id);let t=n[e.id];t&&t.length>0?v(t[0].id,t):v(e.id)},onDragOver:y,onDrop:t=>j(t,e.id),className:"gallery-hover relative w-full overflow-hidden rounded-xl",style:{height:d,"--gallery-scale":1.03},"aria-label":`Open ${e.title}`,children:a?(0,t.jsx)("div",{className:"album-stack",children:(0,t.jsx)("div",{className:"album-stack-item",children:"video"===a.type&&a.videoSrc?(0,t.jsx)("video",{className:"gallery-image h-full w-full object-cover",src:k(a.videoSrc),muted:!0,playsInline:!0,preload:"none",style:C(a)}):(0,t.jsx)("img",{src:k(a.src),alt:a.alt,className:"gallery-image h-full w-full object-cover",style:C(a)})})}):(0,t.jsx)(l.default,{src:s||r,alt:e.alt||`${e.title} cover`,fill:!0,className:"gallery-image object-cover"})})})),(0,t.jsxs)("div",{className:"mt-5 flex items-center justify-between",children:[(0,t.jsx)(T,{as:"h4",value:e.title,onChange:t=>b(e.id,{title:t}),className:`font-display text-xl ${S}`}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[p?(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--accent)] px-3 py-1 font-ui text-[11px] uppercase tracking-[0.2em] text-[color:var(--accent)]",onClick:()=>$(e.id),children:"flip preview"}):null,u?(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-3 py-1 font-ui text-[11px] uppercase tracking-[0.2em]",onClick:()=>h(e),children:"delete"}):null]})]}),(0,t.jsxs)("p",{className:`mt-2 text-sm text-[color:var(--ink)]/70 ${I}`,children:[f(e.id)," 路 ",e.date]}),u?null:(0,t.jsxs)("p",{className:"mt-1 text-xs uppercase tracking-[0.2em] text-[color:var(--muted)]",children:[i[e.id]?.images??0," IMG 路 ",i[e.id]?.videos??0," VID"]}),o[e.id]?(0,t.jsxs)("p",{className:"mt-2 text-xs uppercase tracking-[0.2em] text-[color:var(--olive)]",children:[o[e.id]," new upload",o[e.id]>1?"s":""]}):null,(0,t.jsx)(T,{as:"p",value:e.mood,onChange:t=>b(e.id,{mood:t}),className:`mt-3 text-base text-[color:var(--ink)]/80 ${I}`}),u&&(0,t.jsxs)("div",{className:"mt-3 grid gap-1 rounded bg-[color:var(--paper2)] p-3 font-mono text-xs text-[color:var(--ink)]/70",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"uppercase tracking-wider opacity-50",children:"Privacy"}),(0,t.jsx)(T,{as:"span",value:e.privacy,onChange:t=>b(e.id,{privacy:t}),className:"hover:underline"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"uppercase tracking-wider opacity-50",children:"Content"}),(0,t.jsxs)("span",{children:[i[e.id]?.images??0," IMG 路 "," ",i[e.id]?.videos??0," VID"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"uppercase tracking-wider opacity-50",children:"Size"}),(0,t.jsxs)("span",{children:[(i[e.id]?.totalSize??0).toFixed(1)," MB"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"uppercase tracking-wider opacity-50",children:"ID"}),(0,t.jsxs)("span",{title:e.id,children:[e.id.slice(0,8),"..."]})]})]}),n[e.id]?.length?(0,t.jsx)("div",{className:"mt-4 grid grid-cols-3 gap-2",children:n[e.id].slice(0,3).map(l=>(0,t.jsxs)("div",{className:"relative",style:{height:c},children:[(0,t.jsx)("button",{type:"button",onClick:()=>v(l.id,n[e.id]),className:"gallery-hover relative w-full overflow-hidden rounded-lg",style:{height:c},"aria-label":`Open ${l.title}`,children:"video"===l.type&&l.videoSrc?(0,t.jsx)("video",{className:"gallery-image h-full w-full object-cover",src:k(l.videoSrc),muted:!0,playsInline:!0,preload:"none",style:C(l)}):(0,t.jsx)("img",{src:k(l.src),alt:l.alt,className:"gallery-image h-full w-full object-cover",style:C(l)})}),u?(0,t.jsx)("button",{type:"button",className:"absolute left-2 top-2 z-10 rounded-full bg-[color:var(--paper)]/90 px-2 py-1 font-ui text-[10px] uppercase tracking-[0.2em] text-[color:var(--ink)]",draggable:!0,onDragStart:e=>N(e,l),"aria-label":`Drag ${l.title} to set cover`,children:"drag"}):null,u?(0,t.jsx)("button",{type:"button",className:"absolute right-2 top-2 z-10 rounded-full bg-[color:var(--paper)]/90 px-2 py-1 font-ui text-[10px] uppercase tracking-[0.2em] text-[color:var(--ink)]",onClick:e=>{e.stopPropagation(),g(l)},"aria-label":`Remove ${l.title}`,children:"remove"}):null]},l.id))}):null]},e.id)})})]}),d=({content:e,setContent:a,galleryItems:r,albums:s,selectedAlbumId:n,uploadsCount:o,isEditMode:i,isGallerySelectOpen:d,selectedGalleryIds:c,pendingGalleryDelete:u,galleryScale:p,openMenuId:m,setOpenMenuId:x,setIsGallerySelectOpen:f,setPendingGalleryDelete:b,closeSelection:h,toggleGallerySelection:g,confirmGalleryDelete:v,handleGalleryClick:y,handleGalleryAlbumDoubleClick:j,addFiles:N,updateGalleryTitle:w,handleMoveToAlbum:k,setAlbumCoverFromItem:C,handleDeleteItem:S,openLightbox:E,setEditorTargetId:I,setNoteEditingId:T,getMediaKey:$,resolveText:D,updateOverride:P,resolveAssetSrc:M,getMediaStyle:O,displayEffectClass:_,labelEffectClass:A,bodyEffectClass:L,EditableText:R})=>(0,t.jsxs)("section",{id:"gallery",className:"mt-16",onDragOver:e=>{i&&e.preventDefault()},onDrop:e=>{i&&(e.preventDefault(),N(e.dataTransfer.files,n||s[0]?.id||""))},children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-end justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(R,{as:"p",value:D("section.gallery","gallery"),onChange:e=>P("section.gallery",e),className:`font-ui text-xs uppercase tracking-[0.25em] text-[color:var(--muted)] ${A}`}),(0,t.jsx)(R,{as:"h3",value:e.galleryTitle,onChange:e=>a(t=>({...t,galleryTitle:e})),className:`font-display text-3xl ${_}`})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,t.jsx)(R,{as:"p",value:e.galleryDescription,onChange:e=>a(t=>({...t,galleryDescription:e})),className:`text-sm text-[color:var(--ink)]/70 ${L}`}),i?(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-4 py-2 font-ui text-xs uppercase tracking-[0.2em]",onClick:()=>f(e=>!e),children:d?"close selection":"select photos"}):null]})]}),(0,t.jsx)("div",{className:"masonry mt-8 columns-1 sm:columns-2 lg:columns-3",children:r.map((e,a)=>(0,t.jsxs)("div",{className:"masonry-item paper-card overflow-hidden p-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("button",{type:"button",className:"gallery-hover relative w-full overflow-hidden rounded-xl",style:{"--gallery-scale":p},onClick:()=>y(e.id),onDoubleClick:()=>j(e.id),"aria-label":`Open ${e.title}`,children:"video"===e.type&&e.videoSrc?(0,t.jsx)("video",{className:"gallery-image h-auto w-full rounded-xl object-cover",src:M(e.videoSrc),muted:!0,playsInline:!0,preload:"none",style:O(e)}):e.isLocal?(0,t.jsx)("img",{src:M(e.src),alt:e.alt,className:"gallery-image h-auto w-full rounded-xl object-cover",style:O(e)}):(0,t.jsx)(l.default,{src:M(e.src),alt:e.alt,width:1200,height:900,className:"gallery-image h-auto w-full rounded-xl object-cover",style:O(e)})}),i?(0,t.jsxs)("div",{className:"absolute right-2 top-2 z-20",children:[(0,t.jsx)("button",{type:"button",className:"rounded-full bg-[color:var(--paper)]/90 px-2 py-1 font-ui text-[10px] uppercase tracking-[0.2em] text-[color:var(--ink)]",onClick:t=>{t.stopPropagation(),x(t=>t===e.id?null:e.id)},"aria-label":`Open menu for ${e.title}`,children:"menu"}),m===e.id?(0,t.jsx)("div",{className:"mt-2 w-56 rounded-xl border border-[color:var(--muted)] bg-[color:var(--paper)] p-3 text-[10px] uppercase tracking-[0.18em] text-[color:var(--ink)] shadow-[0_18px_30px_rgba(43,39,35,0.12)]",onClick:e=>e.stopPropagation(),children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[9px] text-[color:var(--muted)]",children:"edit"}),(0,t.jsxs)("div",{className:"mt-2 flex flex-wrap gap-2",children:[(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-2 py-1",onClick:()=>{E(e.id),I($(e)),x(null)},children:"crop"}),(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-2 py-1",onClick:()=>{E(e.id),I($(e)),x(null)},children:"resize"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[9px] text-[color:var(--muted)]",children:"move"}),(0,t.jsxs)("select",{className:"mt-2 w-full rounded-full border border-[color:var(--muted)] bg-transparent px-2 py-1",defaultValue:"",disabled:!e.albumId,onChange:t=>{let l=t.currentTarget.value;l&&(k(e,l),t.currentTarget.value="",x(null))},children:[(0,t.jsx)("option",{value:"",disabled:!0,children:"select album"}),s.map(l=>(0,t.jsx)("option",{value:l.id,children:l.title},`move-${e.id}-${l.id}`))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[9px] text-[color:var(--muted)]",children:"set cover"}),(0,t.jsxs)("select",{className:"mt-2 w-full rounded-full border border-[color:var(--muted)] bg-transparent px-2 py-1",defaultValue:"",disabled:!e.albumId,onChange:t=>{let l=t.currentTarget.value;l&&(C(l,e),t.currentTarget.value="",x(null))},children:[(0,t.jsx)("option",{value:"",disabled:!0,children:"select album"}),s.map(l=>(0,t.jsx)("option",{value:l.id,children:l.title},`cover-${e.id}-${l.id}`))]})]}),(0,t.jsx)("div",{children:(0,t.jsx)("button",{type:"button",className:"w-full rounded-full border border-[color:var(--muted)] px-2 py-1",onClick:()=>{E(e.id),T($(e)),x(null)},children:"add text"})}),(0,t.jsx)("div",{children:(0,t.jsx)("button",{type:"button",className:"w-full rounded-full border border-[color:var(--muted)] px-2 py-1",onClick:()=>{S(e),x(null)},children:"delete"})})]})}):null]}):null]}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)(R,{as:"p",value:e.title,onChange:t=>w(e.id,t),className:`font-display text-lg ${_}`}),e.detail?(0,t.jsx)("p",{className:`text-sm text-[color:var(--ink)]/70 ${L}`,children:e.detail}):null]})]},`${e.id}-${a}`))}),i&&d?(0,t.jsxs)("div",{className:"mt-10 paper-card p-6",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-ui text-xs uppercase tracking-[0.25em] text-[color:var(--muted)]",children:"selection mode"}),(0,t.jsx)("p",{className:`font-display text-xl ${_}`,children:"Select photos to delete"})]}),(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-4 py-2 font-ui text-xs uppercase tracking-[0.2em]",onClick:h,children:"close"})]}),(0,t.jsx)("div",{className:"mt-6 grid gap-4 sm:grid-cols-3 lg:grid-cols-4",children:r.map(e=>{let a=!!e.albumId,r=c.includes(e.id);return(0,t.jsxs)("div",{className:"relative overflow-hidden rounded-xl",children:["video"===e.type&&e.videoSrc?(0,t.jsx)("video",{className:"h-28 w-full object-cover",src:M(e.videoSrc),muted:!0,playsInline:!0,preload:"none",style:O(e)}):e.isLocal?(0,t.jsx)("img",{src:M(e.src),alt:e.alt,className:"h-28 w-full object-cover",style:O(e)}):(0,t.jsx)(l.default,{src:M(e.src),alt:e.alt,width:400,height:300,className:"h-28 w-full object-cover",style:O(e)}),(0,t.jsx)("button",{type:"button",className:`absolute right-2 top-2 h-5 w-5 rounded-full border-2 ${r?"border-[color:var(--accent)] bg-[color:var(--accent)]":"border-[color:var(--paper)] bg-[color:var(--paper)]/70"} ${a?"":"opacity-40"}`,onClick:()=>{a&&g(e.id)},"aria-label":a?`Select ${e.title}`:`${e.title} cannot be deleted`})]},`select-${e.id}`)})}),(0,t.jsxs)("div",{className:"mt-6 flex flex-wrap items-center justify-between gap-4",children:[(0,t.jsxs)("p",{className:"text-sm text-[color:var(--ink)]/70",children:["Selected: ",c.length]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-4 py-2 font-ui text-xs uppercase tracking-[0.2em]",onClick:()=>b("selected"),disabled:0===c.length,children:"delete selected"}),(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-4 py-2 font-ui text-xs uppercase tracking-[0.2em]",onClick:()=>b("all"),disabled:0===o,children:"delete all"})]})]}),u?(0,t.jsxs)("div",{className:"mt-4 flex flex-wrap items-center justify-between gap-4 rounded-lg border border-[color:var(--muted)] px-4 py-3",children:[(0,t.jsx)("p",{className:"text-sm text-[color:var(--ink)]/70",children:"all"===u?"Delete all uploaded photos?":"Delete selected photos?"}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-4 py-2 font-ui text-xs uppercase tracking-[0.2em]",onClick:()=>b(null),children:"no"}),(0,t.jsx)("button",{type:"button",className:"rounded-full bg-[color:var(--accent)] px-4 py-2 font-ui text-xs uppercase tracking-[0.2em] text-[color:var(--paper)]",onClick:v,children:"yes"})]})]}):null]}):null]}),c=({content:e,setContent:l,hero:a,heroAlbum:r,heroHeight:s,heroScale:n,heroSourceId:o,setHeroSourceId:i,openLightbox:d,updateAlbum:c,requestDeleteAlbum:u,resolveAssetSrc:p,getMediaStyle:m,albums:x,isEditMode:f,displayEffectClass:b,labelEffectClass:h,bodyEffectClass:g,EditableText:v})=>(0,t.jsxs)("section",{className:"grid items-center gap-10 lg:grid-cols-[0.9fr_1.1fr] fade-up",children:[(0,t.jsxs)("div",{className:"space-y-5",children:[(0,t.jsx)(v,{as:"p",value:e.heroDate,onChange:e=>l(t=>({...t,heroDate:e})),className:`font-ui text-xs uppercase tracking-[0.25em] text-[color:var(--olive)] ${h}`}),(0,t.jsx)(v,{as:"h2",value:e.heroHeadline,onChange:e=>l(t=>({...t,heroHeadline:e})),className:`font-display headline-gradient text-4xl leading-tight sm:text-5xl ${b}`}),(0,t.jsx)(v,{as:"p",value:e.heroIntro,onChange:e=>l(t=>({...t,heroIntro:e})),multiline:!0,className:`text-lg leading-relaxed text-[color:var(--ink)]/80 ${g}`}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-4 font-ui text-sm uppercase tracking-[0.2em]",children:[(0,t.jsx)("a",{className:"rounded-full bg-[color:var(--accent)] px-6 py-3 text-[color:var(--paper)] shadow-[0_8px_24px_rgba(201,123,99,0.35)] transition-transform hover:-translate-y-0.5",href:"#gallery",children:(0,t.jsx)(v,{as:"span",value:e.heroCtaPrimary,onChange:e=>l(t=>({...t,heroCtaPrimary:e})),className:h,editable:!1})}),(0,t.jsx)("a",{className:"rounded-full border border-[color:var(--muted)] px-6 py-3 text-[color:var(--ink)] transition-colors hover:border-transparent hover:bg-[color:var(--paper-2)]",href:"#albums",children:(0,t.jsx)(v,{as:"span",value:e.heroCtaSecondary,onChange:e=>l(t=>({...t,heroCtaSecondary:e})),className:h,editable:!1})})]})]}),(0,t.jsxs)("div",{className:"paper-card tape-effect p-6",children:[(0,t.jsx)("button",{type:"button",onClick:()=>d(a.id),className:"gallery-hover relative w-full overflow-hidden rounded-xl shadow-[inset_0_0_0_1px_rgba(44,42,38,0.08)]",style:{height:s,"--gallery-scale":1.02},"aria-label":`Open ${a.title}`,children:(0,t.jsx)("div",{style:{transform:`scale(${n})`,transformOrigin:"center center",width:"100%",height:"100%",transition:"transform 0.2s ease",position:"relative"},children:"video"===a.type&&a.videoSrc?(0,t.jsx)("video",{className:"gallery-image h-full w-full object-cover",src:p(a.videoSrc),muted:!0,playsInline:!0,preload:"none",style:m(a)}):a.isLocal?(0,t.jsx)("img",{src:p(a.src),alt:a.alt,className:"gallery-image h-full w-full object-cover",loading:"eager",fetchPriority:"high",style:m(a)}):(0,t.jsx)("img",{src:p(a.src),alt:a.alt,className:"gallery-image object-cover",loading:"eager",fetchPriority:"high",style:{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:"cover",...m(a)}})})}),(0,t.jsxs)("div",{className:"mt-5 space-y-2",children:[(0,t.jsx)(v,{as:"p",value:a.title,onChange:e=>r?c(r.id,{title:e}):l(t=>({...t,heroCardTitle:e})),className:`font-display text-xl ${b}`}),(0,t.jsx)(v,{as:"p",value:a.detail??"",onChange:e=>r?c(r.id,{mood:e}):l(t=>({...t,heroCardDetail:e})),className:`text-sm text-[color:var(--ink)]/70 ${g}`})]}),f?(0,t.jsxs)("div",{className:"mt-4 flex flex-wrap items-center gap-3 font-ui text-xs uppercase tracking-[0.2em]",children:[(0,t.jsx)("span",{className:"text-[color:var(--muted)]",children:"hero source"}),(0,t.jsxs)("select",{className:"rounded-full border border-[color:var(--muted)] bg-transparent px-4 py-2",value:o??"",onChange:e=>{i(e.currentTarget.value||null)},children:[(0,t.jsx)("option",{value:"",children:"Sunday Light"}),x.map(e=>(0,t.jsx)("option",{value:e.id,children:e.title},`hero-${e.id}`))]}),r?(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-4 py-2",onClick:()=>u(r),children:"delete album"}):null]}):null]})]}),u=({content:e,setContent:l,visibleTimeline:a,isEditMode:r,resolveText:s,updateOverride:n,updateTimelineItem:o,requestDeleteTimeline:i,openLightbox:d,resolveAssetSrc:c,displayEffectClass:u,labelEffectClass:p,bodyEffectClass:m,EditableText:x,uploads:f})=>(0,t.jsxs)("section",{id:"timeline",className:"mt-20 grid gap-10 lg:grid-cols-[0.9fr_1.1fr]",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(x,{as:"p",value:s("section.timeline","timeline"),onChange:e=>n("section.timeline",e),className:`font-ui text-xs uppercase tracking-[0.25em] text-[color:var(--muted)] ${p}`}),(0,t.jsx)(x,{as:"h3",value:e.timelineTitle,onChange:e=>l(t=>({...t,timelineTitle:e})),className:`font-display text-3xl ${u}`}),(0,t.jsx)(x,{as:"p",value:e.timelineDescription,onChange:e=>l(t=>({...t,timelineDescription:e})),multiline:!0,className:`text-base text-[color:var(--ink)]/75 ${m}`})]}),(0,t.jsx)("div",{className:"space-y-4",children:a.map(e=>(0,t.jsxs)("div",{className:"paper-card flex flex-col gap-4 p-5 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(x,{as:"p",value:e.date,onChange:t=>o(e.id,{date:t}),className:`font-ui text-xs uppercase tracking-[0.2em] text-[color:var(--olive)] ${p}`,editable:!e.isGenerated}),(0,t.jsx)(x,{as:"p",value:e.title,onChange:t=>o(e.id,{title:t}),className:`font-display text-lg ${u}`,editable:!e.isGenerated})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{let t=e.mediaId??(e.id.startsWith("moment-")?e.id.replace("moment-",""):e.id),l=f.find(e=>e.id===t);if(!l)return void d(t,f);let a=e.albumId??l.albumId;if(!a)return void d(l.id,f);let r=f.filter(e=>e.albumId===a);d(l.id,r.length>0?r:f)},className:"group relative h-14 w-20 overflow-hidden rounded-lg","aria-label":`Open ${e.title}`,children:"video"===e.type&&e.videoSrc?(0,t.jsx)("video",{src:c(e.videoSrc),className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-[1.05]",muted:!0,playsInline:!0,preload:"none"}):(0,t.jsx)("img",{src:c(e.src),alt:e.alt,className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-[1.05]"})}),r&&!e.isGenerated?(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-3 py-1 font-ui text-[11px] uppercase tracking-[0.2em]",onClick:()=>i(e),children:"delete"}):null,(0,t.jsx)(x,{as:"p",value:e.detail,onChange:t=>o(e.id,{detail:t}),className:`text-sm text-[color:var(--ink)]/70 ${m}`,editable:!e.isGenerated})]})]},e.id))})]}),p=({content:e,setContent:l,albums:a,selectedAlbum:r,selectedAlbumId:s,setSelectedAlbumId:n,newAlbumTitle:o,setNewAlbumTitle:i,isDragging:d,setIsDragging:c,uploadsForSelectedAlbum:u,uploadsByAlbum:p,uploadPreviewHeight:m,isEditMode:x,resolveText:f,updateOverride:b,createAlbum:h,addFiles:g,handleCoverDragStart:v,updateAlbum:y,openLightbox:j,requestDeleteUpload:N,resolveAssetSrc:w,getMediaStyle:k,displayEffectClass:C,labelEffectClass:S,bodyEffectClass:E,EditableText:I})=>x?(0,t.jsxs)("section",{id:"upload",className:"mt-20",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-end justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(I,{as:"p",value:f("section.uploads","uploads"),onChange:e=>b("section.uploads",e),className:`font-ui text-xs uppercase tracking-[0.25em] text-[color:var(--muted)] ${S}`}),(0,t.jsx)(I,{as:"h3",value:e.uploadTitle,onChange:e=>l(t=>({...t,uploadTitle:e})),className:`font-display text-3xl ${C}`})]}),(0,t.jsx)(I,{as:"p",value:e.uploadDescription,onChange:e=>l(t=>({...t,uploadDescription:e})),className:`text-sm text-[color:var(--ink)]/70 ${E}`})]}),(0,t.jsxs)("div",{className:`paper-card mt-6 flex min-h-[220px] flex-col items-center justify-center gap-4 border-2 border-dashed px-6 py-10 text-center transition-colors ${d?"border-[color:var(--accent)] bg-[color:var(--paper)]/70":"border-[color:var(--muted)]"}`,onDragOver:e=>{e.preventDefault(),c(!0)},onDragLeave:()=>c(!1),onDrop:e=>{e.preventDefault(),c(!1),g(e.dataTransfer.files,s)},children:[(0,t.jsx)(I,{as:"p",value:f("upload.drop","Drop files here"),onChange:e=>b("upload.drop",e),className:`font-display text-2xl ${C}`}),(0,t.jsx)(I,{as:"p",value:f("upload.formats","JPG, PNG, MP4, MOV and similar formats are supported."),onChange:e=>b("upload.formats",e),className:`text-sm text-[color:var(--ink)]/70 ${E}`}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-center gap-3 font-ui text-xs uppercase tracking-[0.2em] text-[color:var(--ink)]",children:[(0,t.jsx)(I,{as:"span",value:f("upload.target","target album"),onChange:e=>b("upload.target",e),className:`text-[11px] text-[color:var(--ink)]/70 ${S}`}),(0,t.jsx)("select",{className:"rounded-full border border-[color:var(--muted)] bg-transparent px-4 py-2",value:s||a[0]?.id||"",onChange:e=>n(e.target.value),children:0===a.length?(0,t.jsx)("option",{value:"",disabled:!0,children:"No albums available"}):a.map(e=>(0,t.jsx)("option",{value:e.id,children:e.title},e.id))}),(0,t.jsxs)("label",{className:"cursor-pointer rounded-full bg-[color:var(--accent)] px-6 py-3 text-[color:var(--paper)] shadow-[0_8px_24px_rgba(184,111,85,0.35)]",children:[(0,t.jsx)(I,{as:"span",value:f("upload.choose","choose files"),onChange:e=>b("upload.choose",e),className:S,editable:!1}),(0,t.jsx)("input",{type:"file",accept:"image/*,video/*",multiple:!0,className:"hidden",onChange:e=>g(e.target.files,s)})]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-center gap-3",children:[(0,t.jsx)("input",{value:o,onChange:e=>i(e.target.value),placeholder:f("upload.newAlbum","New album name"),className:"w-52 rounded-full border border-[color:var(--muted)] bg-transparent px-4 py-2 text-sm"}),(0,t.jsx)("button",{type:"button",onClick:h,className:"rounded-full border border-[color:var(--muted)] px-4 py-2 font-ui text-xs uppercase tracking-[0.2em]",children:(0,t.jsx)(I,{as:"span",value:f("upload.addAlbum","add album"),onChange:e=>b("upload.addAlbum",e),className:S,editable:!1})})]})]}),u.length>0?(0,t.jsx)("div",{className:"mt-8 grid gap-6 md:grid-cols-2",children:u.map(e=>(0,t.jsxs)("article",{className:"paper-card p-6",children:[(0,t.jsx)("div",{className:"relative overflow-hidden rounded-xl",style:{height:m},draggable:x,onDragStart:t=>v(t,e),children:"video"===e.type?(0,t.jsx)("video",{className:"h-full w-full object-cover",src:w(e.videoSrc),muted:!0,playsInline:!0,preload:"none",style:k(e)}):(0,t.jsx)("img",{src:w(e.src),alt:e.alt,className:"h-full w-full object-cover",style:k(e)})}),(0,t.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:`font-display text-lg ${C}`,children:e.title}),e.detail?(0,t.jsx)("p",{className:`text-sm text-[color:var(--ink)]/70 ${E}`,children:e.detail}):null,r?(0,t.jsx)("p",{className:"text-xs uppercase tracking-[0.2em] text-[color:var(--muted)]",children:r.title}):null]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[x&&e.albumId?(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-3 py-1 font-ui text-[11px] uppercase tracking-[0.2em]",onClick:()=>y(e.albumId??"",{coverId:e.id}),children:"set cover"}):null,(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-3 py-1 font-ui text-[11px] uppercase tracking-[0.2em]",onClick:()=>{let t=e.albumId?p[e.albumId]??[e]:[e];j(e.id,t)},children:(0,t.jsx)(I,{as:"span",value:f("upload.view","view"),onChange:e=>b("upload.view",e),className:S,editable:!1})}),(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-3 py-1 font-ui text-[11px] uppercase tracking-[0.2em]",onClick:()=>N(e),children:(0,t.jsx)(I,{as:"span",value:f("upload.remove","remove"),onChange:e=>b("upload.remove",e),className:S,editable:!1})})]})]})]},e.id))}):null]}):null,m="/memories",x="sunday-album-reopen-edit",f=async()=>{try{let e=`${m}/media/uploads/manifest.json`,t=await fetch(e,{cache:"no-store"});if(!t.ok)return[];return(await t.json()).map(e=>{let t=e.albumId||"unsorted",l=`/media/uploads/albums/${t}/${e.filename}`;return{id:e.id,title:e.title,alt:e.alt,type:e.type,src:l,videoSrc:"video"===e.type?l:void 0,albumId:e.albumId,timestamp:e.timestamp,isLocal:!1,fileSize:"number"==typeof e.sizeBytes&&e.sizeBytes>0?`${(e.sizeBytes/1048576).toFixed(1)} MB`:void 0}})}catch{return[]}},b=e=>{if(!e)return"";if(e.startsWith("blob:")||e.startsWith("data:")||e.startsWith("http"))return e;let t=e.startsWith("/")?e:`/${e}`,l=`${m}${t}`,a=l.includes("?")?"&":"?";return`${l}${a}v=20260212-2`},h=e=>e.split("-").filter(Boolean).map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),g=(e,t)=>{let l="string"==typeof e.title&&e.title.trim()?e.title.trim():`Album ${t+1}`,a="string"==typeof e.id&&e.id.trim()?e.id:`album-restored-${t+1}`,r="string"==typeof e.src&&e.src.trim()?e.src:"/media/album-winter-kitchen.svg";return{id:a,title:l,count:"string"==typeof e.count&&e.count.trim()?e.count:"0 uploads",date:"string"==typeof e.date&&e.date.trim()?e.date:"Unknown date",mood:"string"==typeof e.mood?e.mood:"",privacy:"string"==typeof e.privacy&&e.privacy.trim()?e.privacy:"Private link",src:r,alt:"string"==typeof e.alt&&e.alt.trim()?e.alt:`${l} cover`,type:"video"===e.type?"video":"image",coverId:"string"==typeof e.coverId&&e.coverId.trim()?e.coverId:void 0}},v=[{id:"album-winter-kitchen",title:"Winter Kitchen",count:"18 photos",date:"Jan 2026",mood:"Morning light and warm tea.",privacy:"Private link",src:"/media/album-winter-kitchen.svg",alt:"Cozy kitchen scene",type:"image"},{id:"album-snow-walks",title:"Snow Walks",count:"12 photos 路 2 videos",date:"Dec 2025",mood:"Soft footsteps and quiet streets.",privacy:"Friends",src:"/media/album-snow-walks.svg",alt:"Snowy walk in a quiet neighborhood",type:"image"},{id:"album-sunday-tables",title:"Sunday Tables",count:"24 photos",date:"Nov 2025",mood:"Family lunches, small rituals.",privacy:"Private link",src:"/media/album-sunday-tables.svg",alt:"Family lunch table",type:"image"},{id:"album-autumn-woods",title:"Autumn Woods",count:"15 photos",date:"Oct 2025",mood:"Leaves, fog, and an old thermos.",privacy:"Friends",src:"/media/album-autumn-woods.svg",alt:"Autumn woods with soft fog",type:"image"}],y=[{id:"moment-snow-window",date:"Today",title:"First snow by the window",detail:"7:06 AM 路 4 photos",src:"/media/thumb-snow-window.svg",alt:"Snow at the window",type:"image"},{id:"moment-candlelight",date:"Yesterday",title:"Candlelight dinner",detail:"9:12 PM 路 1 video",src:"/media/thumb-candlelight.svg",alt:"Candlelight glow",type:"video",videoSrc:""},{id:"moment-market",date:"Jan 30",title:"Market morning",detail:"10:18 AM 路 6 photos",src:"/media/thumb-market.svg",alt:"Morning market stalls",type:"image"}],j={siteKicker:"personal archive",siteTitle:"Sunday Album",heroDate:"Feb 2026 路 Prague",heroHeadline:"Photographs and film, arranged like a quiet journal.",heroIntro:"A personal archive for friends and family. Browse the latest moments, then dive into each album when you have time to linger.",heroCtaPrimary:"open gallery",heroCtaSecondary:"browse albums",heroCardTitle:"Sunday light",heroCardDetail:"7:06 AM 路 4 photos 路 kitchen window",galleryTitle:"A living wall of moments",galleryDescription:"Mixed sizes, like pages on a table.",albumsTitle:"Collections for friends",uploadTitle:"Add new moments",uploadDescription:"Drag and drop images or videos, or use the picker.",timelineTitle:"Recent moments",timelineDescription:"A gentle flow of time, preserved in sequence so each moment unfolds like a page.",aboutTitle:"Made for friends and family",aboutBody:"A private place for keeping memories safe. Videos start softly in the background. More moments are added as life unfolds.",contactLabel:"contact",contactText:"Send a note for a private link or a download.",contactEmail:"hello@sundayalbum.com"},N=[{id:"playfair",label:"Playfair Display",value:"'Playfair Display', serif"},{id:"fraunces",label:"Fraunces",value:"'Fraunces', serif"},{id:"cormorant",label:"Cormorant Garamond",value:"'Cormorant Garamond', serif"},{id:"dmserif",label:"DM Serif Display",value:"'DM Serif Display', serif"},{id:"bodoni",label:"Bodoni Moda",value:"'Bodoni Moda', serif"},{id:"lora",label:"Lora",value:"'Lora', serif"},{id:"merriweather",label:"Merriweather",value:"'Merriweather', serif"},{id:"spacegrotesk",label:"Space Grotesk",value:"'Space Grotesk', sans-serif"}],w=[{id:"manrope",label:"Manrope",value:"'Manrope', sans-serif"},{id:"worksans",label:"Work Sans",value:"'Work Sans', sans-serif"},{id:"sourcesans",label:"Source Sans 3",value:"'Source Sans 3', sans-serif"},{id:"ibmplex",label:"IBM Plex Sans",value:"'IBM Plex Sans', sans-serif"},{id:"nunito",label:"Nunito Sans",value:"'Nunito Sans', sans-serif"},{id:"jakarta",label:"Plus Jakarta Sans",value:"'Plus Jakarta Sans', sans-serif"}],k=[{id:"none",label:"None"},{id:"soft-shadow",label:"Soft shadow"},{id:"outline",label:"Outline"},{id:"glow",label:"Glow"},{id:"emboss",label:"Emboss"},{id:"shadow-strong",label:"Shadow strong"},{id:"neon",label:"Neon"}],C=[{id:"none",label:"None",value:"none"},{id:"watercolor",label:"Watercolor",value:"radial-gradient(circle at 50% 50%, rgba(0,0,0,0.02) 0%, transparent 50%), url(\"data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.15'/%3E%3C/svg%3E\")"},{id:"kraft",label:"Kraft",value:"url(\"data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.25'/%3E%3C/svg%3E\")"},{id:"graph",label:"Graph",value:"linear-gradient(rgba(0,0,0,0.06) 1px, transparent 1px), linear-gradient(90deg, rgba(0,0,0,0.06) 1px, transparent 1px)",size:"20px 20px"},{id:"dot",label:"Dot Grid",value:"radial-gradient(circle, rgba(0,0,0,0.15) 1px, transparent 1px)",size:"20px 20px"},{id:"washi",label:"Washi",value:"url(\"data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.03' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.2'/%3E%3C/svg%3E\")"},{id:"cardstock",label:"Dark Cardstock",value:"url(\"data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.15'/%3E%3C/svg%3E\")"}],S={palette:{paper:"#efe7dc",paper2:"#e7dccf",ink:"#2b2723",accent:"#b86f55",muted:"#c9beae",olive:"#5a5f45",shadow:"rgba(43, 39, 35, 0.12)"},fonts:{display:"'Playfair Display', serif",body:"'Manrope', sans-serif"},effects:{display:"none",body:"none",label:"none"},texture:"none"},E=[{id:"linen-clay",name:"Linen & Clay",palette:{paper:"#f1e7dc",paper2:"#eadccc",ink:"#2b2723",accent:"#b86f55",muted:"#c9beae",olive:"#5a5f45",shadow:"rgba(43, 39, 35, 0.12)"},fonts:{display:"'Playfair Display', serif",body:"'Manrope', sans-serif"},effects:{display:"none",body:"none",label:"none"},texture:"none"},{id:"moss-smoke",name:"Moss & Smoke",palette:{paper:"#e5e2d6",paper2:"#d8d3c2",ink:"#2f2b26",accent:"#7b8b5a",muted:"#b7b0a1",olive:"#4f5f3f",shadow:"rgba(47, 43, 38, 0.12)"},fonts:{display:"'Cormorant Garamond', serif",body:"'Source Sans 3', sans-serif"},effects:{display:"soft-shadow",body:"none",label:"none"},texture:"none"},{id:"saffron-studio",name:"Saffron Studio",palette:{paper:"#f4e6cf",paper2:"#ecd7b4",ink:"#2f241a",accent:"#d08c3f",muted:"#cbb79f",olive:"#6b5a3a",shadow:"rgba(47, 36, 26, 0.12)"},fonts:{display:"'Fraunces', serif",body:"'Work Sans', sans-serif"},effects:{display:"emboss",body:"none",label:"none"},texture:"none"},{id:"ink-oat",name:"Ink & Oat",palette:{paper:"#f2ede3",paper2:"#e4ddd2",ink:"#232624",accent:"#5f7d87",muted:"#b9b2a6",olive:"#4f5b56",shadow:"rgba(35, 38, 36, 0.12)"},fonts:{display:"'DM Serif Display', serif",body:"'IBM Plex Sans', sans-serif"},effects:{display:"outline",body:"none",label:"none"},texture:"none"},{id:"sunday-morning",name:"Morning Light",palette:{paper:"#f9f7f2",paper2:"#f0ebe0",ink:"#2d2a26",accent:"#d4a373",muted:"#e5e0d6",olive:"#78866b",shadow:"rgba(45, 42, 38, 0.08)"},fonts:{display:"'Fraunces', serif",body:"'Manrope', sans-serif"},effects:{display:"none",body:"none",label:"none"},texture:"none"}],I="uploads",T="settings",$="sunday-album-settings",D=e=>new Promise((t,l)=>{e.onsuccess=()=>t(e.result),e.onerror=()=>l(e.error)}),P=e=>new Promise((t,l)=>{e.oncomplete=()=>t(),e.onabort=()=>l(e.error),e.onerror=()=>l(e.error)}),M=()=>"u"<typeof indexedDB?Promise.resolve(null):new Promise((e,t)=>{let l=indexedDB.open("sunday-album-db",2);l.onupgradeneeded=()=>{let e=l.result;e.objectStoreNames.contains(I)||e.createObjectStore(I,{keyPath:"id"}),e.objectStoreNames.contains(T)||e.createObjectStore(T,{keyPath:"id"})},l.onsuccess=()=>e(l.result),l.onerror=()=>t(l.error)}),O=async()=>{let e=await M();if(!e)return null;let t=e.transaction(T,"readonly").objectStore(T),l=await D(t.get($));return l?.payload??null},_=async e=>{let t=await M();if(!t)return;let l=t.transaction(T,"readwrite");l.objectStore(T).put({id:$,payload:e}),await P(l)},A=async()=>{let e=await M();if(!e)return[];let t=e.transaction(I,"readonly").objectStore(I);return await D(t.getAll())},L=async(e,t)=>{let l=await M();if(!l)return;let a="";t.type.startsWith("video/")&&(a=await new Promise(e=>{let l=document.createElement("video");l.preload="metadata",l.onloadedmetadata=()=>{window.URL.revokeObjectURL(l.src);let t=Math.floor(l.duration/60),a=Math.floor(l.duration%60);e(`${t}:${a.toString().padStart(2,"0")}`)},l.onerror=()=>e(""),l.src=URL.createObjectURL(t)}));let r=l.transaction(I,"readwrite"),s=r.objectStore(I),n={id:e.id,title:e.title,detail:e.detail,alt:e.alt,type:e.type,albumId:e.albumId,blob:t,blobType:t.type||"application/octet-stream",duration:a,timestamp:e.timestamp};s.put(n),await P(r)},R=async e=>{let t=await M();if(!t)return;let l=t.transaction(I,"readwrite");l.objectStore(I).delete(e),await P(l)},z=async(e,t)=>{let l=await M();if(!l)return;let a=l.transaction(I,"readwrite"),r=a.objectStore(I),s=await D(r.get(e));s&&(r.put({...s,...t}),await P(a))};function B(){let[e,n]=(0,r.useState)("view"),[m,I]=(0,r.useState)(!1),[T,D]=(0,r.useState)(""),[P,M]=(0,r.useState)(""),[B,F]=(0,r.useState)(j);(0,r.useEffect)(()=>{let e=e=>{if("sunday-album-content"===e.key&&e.newValue)try{let t=JSON.parse(e.newValue);F(e=>({...e,...t}))}catch{}};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[]),(0,r.useEffect)(()=>{localStorage.setItem("sunday-album-content",JSON.stringify(B))},[B]);let[U,G]=(0,r.useState)({}),[H,W]=(0,r.useState)(S),[q,J]=(0,r.useState)({}),[V,X]=(0,r.useState)(S),[K,Y]=(0,r.useState)(null),[Q,Z]=(0,r.useState)(S.palette),[ee,et]=(0,r.useState)([]),[el,ea]=(0,r.useState)([]),[er,es]=(0,r.useState)(256),[en,eo]=(0,r.useState)(1),[ei,ed]=(0,r.useState)(160),[ec,eu]=(0,r.useState)(1),[ep,em]=(0,r.useState)(null),[ex,ef]=(0,r.useState)({}),[eb,eh]=(0,r.useState)({}),[eg,ev]=(0,r.useState)(null),[ey,ej]=(0,r.useState)(!1),[eN,ew]=(0,r.useState)(null),[ek,eC]=(0,r.useState)(null),[eS,eE]=(0,r.useState)(!1),[eI,eT]=(0,r.useState)([]),[e$,eD]=(0,r.useState)(null),[eP,eM]=(0,r.useState)(v),[eO,e_]=(0,r.useState)(y),[eA,eL]=(0,r.useState)([]),eR=(0,r.useMemo)(()=>eA.reduce((e,t)=>{let l=parseFloat((t.fileSize||t.detail||"0").replace(/[^0-9.]/g,""));return e+(isNaN(l)?0:l)},0).toFixed(1),[eA]),[ez,eB]=(0,r.useState)(!1),[eF,eU]=(0,r.useState)(v[0]?.id??""),[eG,eH]=(0,r.useState)(""),eW="edit"===e,[eq,eJ]=(0,r.useState)(!1),[eV,eX]=(0,r.useState)([]),[eK,eY]=(0,r.useState)(null),eQ=(0,r.useRef)(null),eZ=(0,r.useRef)(null),e0=(0,r.useRef)(0),e2=(0,r.useRef)(0),e1=(0,r.useRef)(!1),e3=(0,r.useRef)(!1),e4=(0,r.useRef)(null),[e5,e6]=(0,r.useState)(null),[e8,e7]=(0,r.useState)(null),e9=(0,r.useRef)([]),te=(0,r.useRef)(!1),[tt,tl]=(0,r.useState)(null),[ta,tr]=(0,r.useState)(null),ts=(0,r.useRef)(null),tn=(0,r.useRef)(null);(0,r.useEffect)(()=>{let e=!0;return(async()=>{let t=null;try{let e=localStorage.getItem($);e&&(t=JSON.parse(e))}catch{t=null}if(!t)try{t=await O()}catch{t=null}t&&e&&(t.content&&F(t.content),t.heroHeight&&es(t.heroHeight),t.heroScale&&eo(t.heroScale),t.albumImageHeight&&ed(t.albumImageHeight),t.galleryScale&&eu(t.galleryScale),void 0!==t.heroSourceId&&em(t.heroSourceId),t.imageEdits&&ef(t.imageEdits),t.imageNotes&&eh(t.imageNotes),t.albums&&eM(t.albums.map((e,t)=>g(e,t))),t.selectedAlbumId&&eU(t.selectedAlbumId),t.timeline&&t.timeline.length>0&&e_(t.timeline),t.textOverrides&&G(t.textOverrides),t.globalTheme&&W(t.globalTheme),t.albumThemes&&J(t.albumThemes),t.deletedUploadIds&&eT(t.deletedUploadIds))})(),()=>{e=!1}},[]);let to=e=>({palette:{...e.palette},fonts:{...e.fonts},effects:{...e.effects},texture:e.texture??"none"}),ti=()=>({content:{...B},textOverrides:{...U},theme:to(V),globalTheme:to(H),albumThemes:Object.fromEntries(Object.entries(q).map(([e,t])=>[e,to(t)])),heroHeight:er,heroScale:en,albumImageHeight:ei,galleryScale:ec}),td=e=>{F(e.content),G(e.textOverrides),X(e.theme),W(e.globalTheme),J(e.albumThemes),es(e.heroHeight),eo(e.heroScale??1),ed(e.albumImageHeight),eu(e.galleryScale)},tc=()=>{et(e=>[...e,ti()]),ea([])},tu=()=>{te.current||(tc(),te.current=!0)},tp=()=>{te.current=!1},tm=()=>{if(0===ee.length)return;let e=ee[ee.length-1];ea(e=>[ti(),...e]),et(e=>e.slice(0,-1)),td(e)},tx=()=>{if(0===el.length)return;let e=el[0];et(e=>[...e,ti()]),ea(e=>e.slice(1)),td(e)},tf=(e,t)=>U[e]??t,tb=(e,t)=>{G(l=>({...l,[e]:t}))},th=e=>"soft-shadow"===e?"text-effect-soft":"outline"===e?"text-effect-outline":"glow"===e?"text-effect-glow":"emboss"===e?"text-effect-emboss":"shadow-strong"===e?"text-effect-shadow-strong":"neon"===e?"text-effect-neon":"text-effect-none",tg=K??V,tv=th(tg.effects.display),ty=th(tg.effects.body),tj=th(tg.effects.label),tN=C.find(e=>e.id===tg.texture),tw={"--paper":tg.palette.paper,"--paper-2":tg.palette.paper2,"--ink":tg.palette.ink,"--accent":tg.palette.accent,"--muted":tg.palette.muted,"--olive":tg.palette.olive,"--shadow":tg.palette.shadow,"--font-display":tg.fonts.display,"--font-body":tg.fonts.body,...tN&&"none"!==tN.id?{backgroundImage:tN.value,backgroundSize:tN.size,backgroundBlendMode:"watercolor"===tN.id?"multiply":"normal"}:{}},tk=ee.length>0,tC=e=>{let t=e.head;t.querySelectorAll("base").forEach(e=>e.remove()),t.querySelectorAll("link[rel=stylesheet], style").forEach(e=>e.remove());let l=e.createElement("base");l.href=window.location.origin,t.appendChild(l),document.querySelectorAll("link[rel=stylesheet], style").forEach(e=>{t.appendChild(e.cloneNode(!0))})},tS=(e=!1)=>{(e||!tk||(tt??window).confirm("Close the editor? You can undo changes after reopening."))&&(tn.current&&(tn.current.remove(),tn.current=null),tt&&!tt.closed&&tt.close(),ts.current?.disconnect(),ts.current=null,tl(null),tr(null),n("view"),I(!1),M(""))},tE=async()=>{if(tt&&!tt.closed)return void tt.focus();let e=window.open("","SundayAlbumEditor","width=520,height=800,left=60,top=60,resizable=yes,scrollbars=yes");if(!e)return void(()=>{if(tn.current)return;let e=document.createElement("div");e.dataset.editorInline="true",document.body.appendChild(e),tn.current=e,tr(e)})();e.document.title="Sunday Album Editor",e.document.body.style.margin="0",e.document.body.className=document.body.className,e.document.documentElement.className=document.documentElement.className;let t=e.document.createElement("div");e.document.body.appendChild(t),tC(e.document),window.setTimeout(()=>tC(e.document),0),window.setTimeout(()=>tC(e.document),300),tl(e),tr(t),ts.current?.disconnect(),ts.current=new MutationObserver(()=>{tC(e.document)}),ts.current.observe(document.head,{childList:!0,subtree:!0}),e.addEventListener("beforeunload",e=>{tk&&(e.preventDefault(),e.returnValue="")}),e.addEventListener("unload",()=>{tl(null),tr(null),n("view"),I(!1),M("")})};(0,r.useEffect)(()=>{e9.current=eA},[eA]),(0,r.useEffect)(()=>{"edit"!==e?tS(!0):(!tt||tt.closed)&&tE()},[e,tt]),(0,r.useEffect)(()=>{X(q[eF]??H)},[q,H,eF]),(0,r.useEffect)(()=>{Z(V.palette)},[V]),(0,r.useEffect)(()=>{let e=!0;return(async()=>{let t=await f();if(!e)return;if(t.length>0){let e=eI.length>0?t.filter(e=>!eI.includes(e.id)):t;eL(e),eM(t=>{let l=new Set(t.map(e=>e.id)),a=Array.from(new Set(e.map(e=>e.albumId).filter(e=>!!e))).filter(e=>!l.has(e));return 0===a.length?t:[...a.map(t=>{let l=e.filter(e=>e.albumId===t),a=l[0],r=new Date(Math.max(...l.map(e=>e.timestamp??Date.now()),Date.now())).toLocaleString("en-US",{month:"short",year:"numeric"}),s=l.filter(e=>"image"===e.type).length,n=l.filter(e=>"video"===e.type).length,o=[`${s} photo${1===s?"":"s"}`];return n>0&&o.push(`${n} video${1===n?"":"s"}`),{id:t,title:h(t),count:o.join(" 路 "),date:r,mood:"Imported collection.",privacy:"Private link",src:a?.src??"/media/album-winter-kitchen.svg",alt:`${h(t)} cover`,type:a?.type??"image",coverId:a?.id}}),...t]});return}let l=await A();e&&0!==l.length&&eL(l.map(e=>{let t=URL.createObjectURL(e.blob),l=(e.blob.size/1048576).toFixed(1);return{id:e.id,title:e.title,detail:e.detail,src:t,alt:e.alt,type:e.type,videoSrc:"video"===e.type?t:void 0,isLocal:!0,albumId:e.albumId,fileSize:`${l} MB`,mimeType:e.blobType.split("/")[1]?.toUpperCase()??"FILE",duration:e.duration,timestamp:e.timestamp}}))})(),()=>{e=!1}},[eI]),(0,r.useEffect)(()=>{0!==eI.length&&eL(e=>e.filter(e=>!eI.includes(e.id)))},[eI]);let tI=e=>{let t={content:B,heroHeight:er,heroScale:en,albumImageHeight:ei,galleryScale:ec,heroSourceId:ep,imageEdits:ex,imageNotes:eb,albums:eP,selectedAlbumId:eF,timeline:eO,textOverrides:U,globalTheme:H,albumThemes:q,deletedUploadIds:eI,...e};try{localStorage.setItem($,JSON.stringify(t))}catch{}_(t)};(0,r.useEffect)(()=>{let e=window.setTimeout(()=>{tI()},250);return()=>window.clearTimeout(e)},[B,er,en,ei,ec,ep,ex,eb,eP,eF,eO,U,H,q,eI]);let tT=(0,r.useMemo)(()=>{let e={};return eA.forEach(t=>{t.albumId&&(e[t.albumId]=(e[t.albumId]??0)+1)}),e},[eA]),t$=(0,r.useMemo)(()=>{let e={};return eA.forEach(t=>{if(!t.albumId)return;e[t.albumId]||(e[t.albumId]={images:0,videos:0,totalSize:0});let l=parseFloat(t.fileSize||"0");isNaN(l)||(e[t.albumId].totalSize+=l),"video"===t.type?e[t.albumId].videos+=1:e[t.albumId].images+=1}),e},[eA]),tD=(0,r.useMemo)(()=>{let e={};return eA.forEach(t=>{t.albumId&&(e[t.albumId]||(e[t.albumId]=[]),e[t.albumId].push(t))}),eP.forEach(t=>{let l=e[t.id];if(!l||!t.coverId)return;let a=l.findIndex(e=>e.id===t.coverId);if(a>0){let[e]=l.splice(a,1);l.unshift(e)}}),e},[eA,eP]),tP=ep?eP.find(e=>e.id===ep):void 0,tM=tP?tD[tP.id]?.find(e=>e.id===tP.coverId):void 0,tO=tM?.id,t_=(0,r.useMemo)(()=>({id:tP?.id??"hero-sunday-light",title:tP?.title??B.heroCardTitle,detail:tP?.mood??B.heroCardDetail,src:tM?.src??tP?.src??"/media/hero-sunday-light.svg",alt:tM?.alt??tP?.alt??"Warm morning light through a kitchen window",type:tM?.type??tP?.type??"image",videoSrc:tM?.videoSrc,isLocal:tM?.isLocal,mediaId:tO}),[tP,tM,B.heroCardTitle,B.heroCardDetail]);(0,r.useEffect)(()=>{"1"===sessionStorage.getItem(x)&&(sessionStorage.removeItem(x),n("edit"),I(!1),M(""))},[]);let tA=(0,r.useMemo)(()=>eP.filter(e=>(tD[e.id]?.length??0)>0),[eP,tD]),tL=eW?eP:tA;(0,r.useEffect)(()=>{eW&&e$&&eD(null)},[eW,e$]),(0,r.useEffect)(()=>{e$&&(tD[e$]?.length||eD(null))},[e$,tD]);let tR=(0,r.useMemo)(()=>{let e={id:t_.id,title:t_.title,detail:t_.detail,src:t_.src,alt:t_.alt,type:t_.type,videoSrc:t_.videoSrc,isLocal:t_.isLocal},t=tA.filter(e=>e.id!==t_.id).map(e=>e.id),l=t.length,a=3;l>0&&3*l<20&&(a=Math.ceil(20/l));let r=[];return t.forEach(e=>{var t,l;let s=(t=tD[e]||[],l=a,[...t].sort((e,t)=>e.id.charCodeAt(e.id.length-1)+e.id.length-(t.id.charCodeAt(t.id.length-1)+t.id.length)).slice(0,l));r.push(...s.map(t=>{let l=eP.find(t=>t.id===e);return{...t,title:l?l.title:t.title,detail:l?l.date:t.detail}}))}),[e,...r]},[tA,t_,tD,eP]),[tz,tB]=(0,r.useState)([]),[tF,tU]=(0,r.useState)(null),tG=null===tF?null:tz[tF],tH=(0,r.useMemo)(()=>{if(!tG)return null;if(tG.albumId)return tG;let e=tG.mediaId??tG.id;return eA.find(t=>t.id===e)??null},[tG,eA]),tW=(e,t)=>{let l=t&&t.length>0?t:tR,a=l.findIndex(t=>t.id===e);a>=0&&(tB(l),tU(a))},tq=()=>{if(!tH)return;let e=tG?.id??tH.id;t3(tH.id),tB(t=>{let l=t.filter(t=>t.id!==e);return 0===l.length?(tU(null),[]):(tU(e=>null===e?null:e>=l.length?l.length-1:e),l)})},tJ=e=>({content:B,heroHeight:er,heroScale:en,albumImageHeight:ei,galleryScale:ec,heroSourceId:ep,imageEdits:ex,imageNotes:eb,albums:eP,selectedAlbumId:eF,timeline:eO,textOverrides:U,globalTheme:H,albumThemes:q,deletedUploadIds:eI,...e}),tV=async()=>{let e=JSON.stringify(tJ());try{if("u">typeof navigator&&navigator.clipboard?.writeText){await navigator.clipboard.writeText(e),alert("Sync JSON copied to clipboard.");return}}catch{}window.prompt("Copy sync JSON",e)},tX=e=>{eW&&e7({type:"album",id:e.id,label:e.title})},tK=(e,t)=>{if(eW&&(tt&&!tt.closed?tt:window).confirm(`Delete ${e.title}?`)){if("lightbox"===t&&tG?.id===e.id)return void tq();t3(e.id)}},tY=e=>{eW&&e7({type:"timeline",id:e.id,label:e.title})},tQ=e=>{null!==e4.current&&window.clearInterval(e4.current),e4.current=window.setInterval(()=>{(e=>{let t=eZ.current;if(!t)return;let l=t.querySelector(".thumb-card"),a=Number.parseFloat(window.getComputedStyle(t).gap)||0,r=2*(l?l.offsetWidth+a:.2*t.clientWidth);t.scrollBy({left:"left"===e?-r:r,behavior:"smooth"})})(e)},240)},tZ=()=>{null!==e4.current&&(window.clearInterval(e4.current),e4.current=null)},t0=(e,t)=>{eW&&(e.dataTransfer.setData("text/plain",t.id),e.dataTransfer.effectAllowed="move")};(0,r.useEffect)(()=>{let e=e=>{e.preventDefault()};return window.addEventListener("dragover",e),window.addEventListener("drop",e),()=>{window.removeEventListener("dragover",e),window.removeEventListener("drop",e)}},[]),(0,r.useEffect)(()=>{if(null===tF)return;let e=e=>{"Escape"===e.key&&tU(null),"ArrowRight"===e.key&&tU(e=>null===e?e:(e+1)%tR.length),"ArrowLeft"===e.key&&tU(e=>null===e?e:(e-1+tR.length)%tR.length)};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[tF,tz.length]),(0,r.useEffect)(()=>{if(null===tF)return;let e=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=e}},[tF]),(0,r.useEffect)(()=>{tG&&(eE(!1),ej(!1),eC(null),ew(null))},[tG?.id]),(0,r.useEffect)(()=>()=>{e9.current.forEach(e=>{e.isLocal&&(URL.revokeObjectURL(e.src),e.videoSrc&&URL.revokeObjectURL(e.videoSrc))})},[]),(0,r.useEffect)(()=>()=>{eQ.current&&window.clearTimeout(eQ.current)},[]),(0,r.useEffect)(()=>{if(0===eP.length){eF&&eU("");return}eP.some(e=>e.id===eF)||eU(eP[0].id)},[eP,eF]);let t2=e=>{!eW||e.dataTransfer?.types?.includes("Files")&&(e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy")},t1=(e,t)=>{if(!e||0===e.length)return;let l=[],a=Array.from(e).map(e=>{let a=e.name.toLowerCase();if("image/heic"===e.type||"image/heif"===e.type||a.endsWith(".heic")||a.endsWith(".heif"))return l.push(e.name),null;let r=e.type.startsWith("video/"),s=/\.(mp4|mov|webm|mkv|avi)$/i.test(a),n=r||s,o=URL.createObjectURL(e),i="u">typeof crypto&&"randomUUID"in crypto?crypto.randomUUID():`${Date.now()}-${Math.random().toString(36).slice(2,8)}`;return{item:{id:`${e.name}-${e.lastModified}-${i}`,title:e.name.replace(/\.[^/.]+$/,""),detail:`${(e.size/1048576).toFixed(1)} MB`,src:o,alt:e.name,type:n?"video":"image",videoSrc:n?o:void 0,isLocal:!0,albumId:t,timestamp:e.lastModified},file:e}}).filter(e=>!!e),r=a.map(({item:e})=>e);eL(e=>[...r,...e]),a.forEach(({item:e,file:t})=>{L(e,t)}),l.length>0&&alert(`Skipped ${l.length} HEIC/HEIF file(s). Please convert to JPG or PNG.`)},t3=e=>{let t=e9.current.find(t=>t.id===e);t&&!t.isLocal&&eT(t=>{let l=t.includes(e)?t:[...t,e];return tI({deletedUploadIds:l}),l}),eL(t=>{let l=t.find(t=>t.id===e);return l?.isLocal&&(URL.revokeObjectURL(l.src),l.videoSrc&&URL.revokeObjectURL(l.videoSrc)),t.filter(t=>t.id!==e)}),ef(t=>{if(!t[e])return t;let l={...t};return delete l[e],l}),eh(t=>{if(!t[e])return t;let l={...t};return delete l[e],l}),R(e)},t4=(e,t)=>{eM(l=>l.map(l=>l.id===e?{...l,...t}:l))},t5=(e,t)=>{eL(l=>l.map(l=>l.id===e?{...l,...t}:l));let l={title:t.title,detail:t.detail,alt:t.alt};void 0!==t.albumId&&(l.albumId=t.albumId),z(e,l)},t6=(e,t)=>{e&&t4(e,{coverId:t.id})},t8=(e,t)=>{e_(l=>l.map(l=>l.id===e?{...l,...t}:l))},t7=e=>e.mediaId??e.id,t9=e=>({scale:"number"==typeof e?.scale?e.scale:1,offsetX:"number"==typeof e?.offsetX?e.offsetX:0,offsetY:"number"==typeof e?.offsetY?e.offsetY:0,rotation:"number"==typeof e?.rotation?e.rotation:0}),le=e=>t9(ex[t7(e)]),lt=e=>{let t=ex[t7(e)];if(!t)return;let l=t9(t);return{transform:`translate(${l.offsetX}%, ${l.offsetY}%) rotate(${l.rotation}deg) scale(${l.scale})`,transformOrigin:"center"}},ll=(e,t)=>{let l=t7(e);ef(e=>({...e,[l]:{...t9(e[l]),...t}}))},la=(e,t)=>{let l=le(e).rotation;ll(e,{rotation:((l+t)%360+360)%360})},lr=e=>eb[t7(e)]??"",ls=(e,t)=>{t&&e.albumId&&t5(e.id,{albumId:t})},ln=(e,t)=>{if(e.albumId)return void tK(e,t);let l=eP.find(t=>t.id===e.id);if(l)return void tX(l);let a=eO.find(t=>t.id===e.id);a&&tY(a)},lo=eP.find(e=>e.id===eF),li=!!q[eF],ld=eA.filter(e=>e.albumId===eF),lc=Math.max(180,Math.round(1.1*ei)),lu=Math.max(96,Math.round(.55*ei)),lp=({as:e,value:l,onChange:a,className:r,multiline:s=!1,editable:n=!0})=>eW&&n?(0,t.jsx)(e,{className:`editable-text ${r??""}`,contentEditable:!0,suppressContentEditableWarning:!0,onClick:e=>{e.preventDefault(),e.stopPropagation()},onKeyDown:e=>{s||"Enter"!==e.key||(e.preventDefault(),e.currentTarget.blur())},onBlur:e=>{let t=e.currentTarget.textContent??"",r=s?t.replace(/\n{3,}/g,"\n\n").trim():t.trim();r!==l&&(tc(),a(r))},children:l}):(0,t.jsx)(e,{className:r,children:l}),lm=(0,r.useMemo)(()=>eA.length<3?eO:[...eA].sort((e,t)=>{let l=e.timestamp??0;return(t.timestamp??0)-l}).slice(0,3).map(e=>{let t=eP.find(t=>t.id===e.albumId),l=e.timestamp?new Date(e.timestamp):new Date,a=l.toLocaleDateString("en-US",{month:"short",day:"numeric"}),r=new Date,s=new Date;return s.setDate(s.getDate()-1),l.toDateString()===r.toDateString()?a="Today":l.toDateString()===s.toDateString()&&(a="Yesterday"),{id:`moment-${e.id}`,mediaId:e.id,albumId:e.albumId,date:a,title:t?t.title:"Recent Upload",detail:t?t.date:e.detail,src:e.src,alt:e.alt,type:e.type,videoSrc:e.videoSrc,isGenerated:!0}}),[eA,eO,eP]);return(0,t.jsxs)("div",{className:`${"none"!==tg.texture?"":"page-background"} min-h-screen theme-root`,style:tw,onDragOver:t2,onDrop:e=>((e,t)=>{if(!eW||!e.dataTransfer?.files?.length)return;e.preventDefault(),e.stopPropagation();let l=eF||eP[0]?.id||"";t1(e.dataTransfer.files,l)})(e),children:[(0,t.jsxs)("div",{className:"grain",children:[(0,t.jsxs)("header",{className:"mx-auto flex w-full max-w-6xl items-center justify-between px-6 pt-10 sm:px-10",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(lp,{as:"p",value:B.siteKicker,onChange:e=>{F(t=>{let l={...t,siteKicker:e};return localStorage.setItem("sunday-album-content",JSON.stringify(l)),l})},className:`font-ui text-xs uppercase tracking-[0.2em] text-[color:var(--muted)] ${tj}`}),(0,t.jsx)(lp,{as:"h1",value:B.siteTitle,onChange:e=>{F(t=>{let l={...t,siteTitle:e};return localStorage.setItem("sunday-album-content",JSON.stringify(l)),l})},className:`font-display text-2xl text-[color:var(--ink)] ${tv}`})]}),(0,t.jsxs)("nav",{className:"hidden items-center gap-6 font-ui text-xs uppercase tracking-[0.25em] text-[color:var(--ink)] sm:flex",children:[(0,t.jsx)("button",{type:"button",className:"transition-opacity hover:opacity-70",onClick:()=>document.getElementById("albums")?.scrollIntoView({behavior:"smooth"}),children:(0,t.jsx)(lp,{as:"span",value:tf("nav.albums","albums"),onChange:e=>tb("nav.albums",e),className:tj,editable:!1})}),(0,t.jsx)("button",{type:"button",className:"transition-opacity hover:opacity-70",onClick:()=>document.getElementById("gallery")?.scrollIntoView({behavior:"smooth"}),children:(0,t.jsx)(lp,{as:"span",value:tf("nav.gallery","gallery"),onChange:e=>tb("nav.gallery",e),className:tj,editable:!1})}),(0,t.jsx)("button",{type:"button",className:"transition-opacity hover:opacity-70",onClick:()=>document.getElementById("timeline")?.scrollIntoView({behavior:"smooth"}),children:(0,t.jsx)(lp,{as:"span",value:tf("nav.timeline","timeline"),onChange:e=>tb("nav.timeline",e),className:tj,editable:!1})}),eW?(0,t.jsx)("button",{type:"button",className:"transition-opacity hover:opacity-70",onClick:()=>document.getElementById("upload")?.scrollIntoView({behavior:"smooth"}),children:(0,t.jsx)(lp,{as:"span",value:tf("nav.upload","upload"),onChange:e=>tb("nav.upload",e),className:tj,editable:!1})}):null,(0,t.jsx)("button",{type:"button",className:"transition-opacity hover:opacity-70",onClick:()=>document.getElementById("about")?.scrollIntoView({behavior:"smooth"}),children:(0,t.jsx)(lp,{as:"span",value:tf("nav.about","about"),onChange:e=>tb("nav.about",e),className:tj,editable:!1})})]}),(0,t.jsxs)("div",{className:"hidden items-center gap-3 sm:flex",children:[(0,t.jsx)("span",{className:"rounded-full border border-[color:var(--muted)] px-3 py-1 font-ui text-[11px] uppercase tracking-[0.2em]",children:e}),"edit"===e?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-3 py-1 font-ui text-[11px] uppercase tracking-[0.2em] disabled:opacity-50",onClick:tm,disabled:0===ee.length,children:"undo"}),(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-3 py-1 font-ui text-[11px] uppercase tracking-[0.2em] disabled:opacity-50",onClick:tx,disabled:0===el.length,children:"redo"})]}):null,"edit"===e&&(!tt||tt.closed)?(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-3 py-1 font-ui text-[11px] uppercase tracking-[0.2em]",onClick:tE,children:"editor"}):null,"view"===e?(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-3 py-1 font-ui text-[11px] uppercase tracking-[0.2em]",onClick:()=>{I(!0),M("")},children:(0,t.jsx)(lp,{as:"span",value:tf("controls.edit","edit"),onChange:e=>tb("controls.edit",e),className:tj,editable:!1})}):null]})]}),(0,t.jsxs)("main",{className:"mx-auto w-full max-w-6xl px-6 pb-24 pt-12 sm:px-10",children:[(0,t.jsx)(c,{content:B,setContent:F,hero:t_,heroAlbum:tP,heroHeight:er,heroScale:en,heroSourceId:ep,setHeroSourceId:em,openLightbox:tW,updateAlbum:t4,requestDeleteAlbum:tX,resolveAssetSrc:b,getMediaStyle:lt,albums:eP,isEditMode:eW,displayEffectClass:tv,labelEffectClass:tj,bodyEffectClass:ty,EditableText:lp}),ta&&eW?(0,a.createPortal)((0,t.jsx)("div",{className:"theme-root",style:tw,children:(0,t.jsx)("div",{className:"page-background min-h-screen",children:(0,t.jsx)("div",{className:"grain min-h-screen",children:(0,t.jsx)("div",{className:"mx-auto w-full max-w-3xl p-6",children:(0,t.jsxs)("div",{className:"paper-card overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4 border-b border-[color:var(--muted)]/40 px-6 py-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-ui text-xs uppercase tracking-[0.25em] text-[color:var(--muted)]",children:"edit mode"}),(0,t.jsx)("h3",{className:"font-display text-2xl",children:"Content and layout"})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-4 py-2 font-ui text-xs uppercase tracking-[0.2em] disabled:opacity-50",onClick:tm,disabled:0===ee.length,children:"undo"}),(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-4 py-2 font-ui text-xs uppercase tracking-[0.2em] disabled:opacity-50",onClick:tx,disabled:0===el.length,children:"redo"}),(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-4 py-2 font-ui text-xs uppercase tracking-[0.2em]",onClick:()=>{tt&&!tt.closed&&(tt.moveTo(0,0),tt.resizeTo(screen.availWidth,screen.availHeight))},children:"max"}),(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-4 py-2 font-ui text-xs uppercase tracking-[0.2em]",onClick:()=>{tI(),sessionStorage.setItem(x,"1"),window.location.reload()},children:"save + reload"}),(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-4 py-2 font-ui text-xs uppercase tracking-[0.2em]",onClick:()=>{ee.length>0&&tm(),tS(!0)},disabled:0===ee.length,children:"undo + close"}),(0,t.jsx)("button",{type:"button",className:"rounded-full bg-[color:var(--accent)] px-4 py-2 font-ui text-xs uppercase tracking-[0.2em] text-[color:var(--paper)]",onClick:()=>tS(!1),children:"close"})]})]}),(0,t.jsxs)("section",{id:"edit",className:"px-6 py-6",children:[(0,t.jsx)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:(0,t.jsx)("p",{className:"text-sm text-[color:var(--ink)]/70",children:"Changes are local to this browser session."})}),(0,t.jsx)("div",{className:"mt-4 overflow-hidden rounded-xl border border-[color:var(--muted)]/40 p-4 text-sm",children:(0,t.jsxs)("table",{className:"w-full text-left",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-[color:var(--muted)]/20 text-[color:var(--muted)] font-ui text-xs uppercase tracking-[0.2em]",children:[(0,t.jsx)("th",{className:"pb-2",children:"Stat"}),(0,t.jsx)("th",{className:"pb-2 text-right",children:"Value"})]})}),(0,t.jsxs)("tbody",{className:"font-display",children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"py-2",children:"Current Site"}),(0,t.jsx)("td",{className:"py-2 text-right",children:B.siteTitle})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"py-2",children:"Total Photos"}),(0,t.jsx)("td",{className:"py-2 text-right",children:eA.length})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"py-2",children:"Space Used"}),(0,t.jsxs)("td",{className:"py-2 text-right",children:[eR," MB"]})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"py-2",children:"Albums"}),(0,t.jsx)("td",{className:"py-2 text-right",children:eP.length})]})]})]})}),(0,t.jsxs)("div",{className:"mt-4 grid gap-4 md:grid-cols-2",children:[(0,t.jsxs)("label",{className:"space-y-2 text-sm",children:[(0,t.jsx)("span",{className:"font-ui text-xs uppercase tracking-[0.2em] text-[color:var(--muted)]",children:"Site title"}),(0,t.jsx)("input",{value:B.siteTitle,onChange:e=>F(t=>({...t,siteTitle:e.target.value})),className:"w-full rounded-lg border border-[color:var(--muted)] bg-transparent px-3 py-2"})]}),(0,t.jsxs)("label",{className:"space-y-2 text-sm",children:[(0,t.jsx)("span",{className:"font-ui text-xs uppercase tracking-[0.2em] text-[color:var(--muted)]",children:"Site kicker"}),(0,t.jsx)("input",{value:B.siteKicker,onChange:e=>F(t=>({...t,siteKicker:e.target.value})),className:"w-full rounded-lg border border-[color:var(--muted)] bg-transparent px-3 py-2"})]}),(0,t.jsxs)("label",{className:"space-y-2 text-sm",children:[(0,t.jsx)("span",{className:"font-ui text-xs uppercase tracking-[0.2em] text-[color:var(--muted)]",children:"Hero date"}),(0,t.jsx)("input",{value:B.heroDate,onChange:e=>F(t=>({...t,heroDate:e.target.value})),className:"w-full rounded-lg border border-[color:var(--muted)] bg-transparent px-3 py-2"})]}),(0,t.jsxs)("label",{className:"space-y-2 text-sm",children:[(0,t.jsx)("span",{className:"font-ui text-xs uppercase tracking-[0.2em] text-[color:var(--muted)]",children:"Hero headline"}),(0,t.jsx)("input",{value:B.heroHeadline,onChange:e=>F(t=>({...t,heroHeadline:e.target.value})),className:"w-full rounded-lg border border-[color:var(--muted)] bg-transparent px-3 py-2"})]}),(0,t.jsxs)("label",{className:"space-y-2 text-sm md:col-span-2",children:[(0,t.jsx)("span",{className:"font-ui text-xs uppercase tracking-[0.2em] text-[color:var(--muted)]",children:"Hero intro"}),(0,t.jsx)("textarea",{value:B.heroIntro,onChange:e=>F(t=>({...t,heroIntro:e.target.value})),rows:3,className:"w-full rounded-lg border border-[color:var(--muted)] bg-transparent px-3 py-2"})]}),(0,t.jsxs)("label",{className:"space-y-2 text-sm",children:[(0,t.jsx)("span",{className:"font-ui text-xs uppercase tracking-[0.2em] text-[color:var(--muted)]",children:"Hero card title"}),(0,t.jsx)("input",{value:B.heroCardTitle,onChange:e=>{F(t=>{let l={...t,heroCardTitle:e.target.value};return localStorage.setItem("sunday-album-content",JSON.stringify(l)),l})},className:"w-full rounded-lg border border-[color:var(--muted)] bg-transparent px-3 py-2"})]}),(0,t.jsxs)("label",{className:"space-y-2 text-sm",children:[(0,t.jsx)("span",{className:"font-ui text-xs uppercase tracking-[0.2em] text-[color:var(--muted)]",children:"Hero card detail"}),(0,t.jsx)("input",{value:B.heroCardDetail,onChange:e=>{F(t=>{let l={...t,heroCardDetail:e.target.value};return localStorage.setItem("sunday-album-content",JSON.stringify(l)),l})},className:"w-full rounded-lg border border-[color:var(--muted)] bg-transparent px-3 py-2"})]}),(0,t.jsxs)("label",{className:"space-y-2 text-sm",children:[(0,t.jsx)("span",{className:"font-ui text-xs uppercase tracking-[0.2em] text-[color:var(--muted)]",children:"Gallery title"}),(0,t.jsx)("input",{value:B.galleryTitle,onChange:e=>F(t=>({...t,galleryTitle:e.target.value})),className:"w-full rounded-lg border border-[color:var(--muted)] bg-transparent px-3 py-2"})]}),(0,t.jsxs)("label",{className:"space-y-2 text-sm",children:[(0,t.jsx)("span",{className:"font-ui text-xs uppercase tracking-[0.2em] text-[color:var(--muted)]",children:"Gallery description"}),(0,t.jsx)("input",{value:B.galleryDescription,onChange:e=>F(t=>({...t,galleryDescription:e.target.value})),className:"w-full rounded-lg border border-[color:var(--muted)] bg-transparent px-3 py-2"})]}),(0,t.jsxs)("label",{className:"space-y-2 text-sm",children:[(0,t.jsx)("span",{className:"font-ui text-xs uppercase tracking-[0.2em] text-[color:var(--muted)]",children:"Albums title"}),(0,t.jsx)("input",{value:B.albumsTitle,onChange:e=>F(t=>({...t,albumsTitle:e.target.value})),className:"w-full rounded-lg border border-[color:var(--muted)] bg-transparent px-3 py-2"})]}),(0,t.jsxs)("label",{className:"space-y-2 text-sm",children:[(0,t.jsx)("span",{className:"font-ui text-xs uppercase tracking-[0.2em] text-[color:var(--muted)]",children:"Upload title"}),(0,t.jsx)("input",{value:B.uploadTitle,onChange:e=>F(t=>({...t,uploadTitle:e.target.value})),className:"w-full rounded-lg border border-[color:var(--muted)] bg-transparent px-3 py-2"})]}),(0,t.jsxs)("label",{className:"space-y-2 text-sm md:col-span-2",children:[(0,t.jsx)("span",{className:"font-ui text-xs uppercase tracking-[0.2em] text-[color:var(--muted)]",children:"Upload description"}),(0,t.jsx)("input",{value:B.uploadDescription,onChange:e=>F(t=>({...t,uploadDescription:e.target.value})),className:"w-full rounded-lg border border-[color:var(--muted)] bg-transparent px-3 py-2"})]}),(0,t.jsxs)("label",{className:"space-y-2 text-sm",children:[(0,t.jsx)("span",{className:"font-ui text-xs uppercase tracking-[0.2em] text-[color:var(--muted)]",children:"Timeline title"}),(0,t.jsx)("input",{value:B.timelineTitle,onChange:e=>F(t=>({...t,timelineTitle:e.target.value})),className:"w-full rounded-lg border border-[color:var(--muted)] bg-transparent px-3 py-2"})]}),(0,t.jsxs)("label",{className:"space-y-2 text-sm md:col-span-2",children:[(0,t.jsx)("span",{className:"font-ui text-xs uppercase tracking-[0.2em] text-[color:var(--muted)]",children:"Timeline description"}),(0,t.jsx)("input",{value:B.timelineDescription,onChange:e=>F(t=>({...t,timelineDescription:e.target.value})),className:"w-full rounded-lg border border-[color:var(--muted)] bg-transparent px-3 py-2"})]}),(0,t.jsxs)("label",{className:"space-y-2 text-sm",children:[(0,t.jsx)("span",{className:"font-ui text-xs uppercase tracking-[0.2em] text-[color:var(--muted)]",children:"About title"}),(0,t.jsx)("input",{value:B.aboutTitle,onChange:e=>F(t=>({...t,aboutTitle:e.target.value})),className:"w-full rounded-lg border border-[color:var(--muted)] bg-transparent px-3 py-2"})]}),(0,t.jsxs)("label",{className:"space-y-2 text-sm md:col-span-2",children:[(0,t.jsx)("span",{className:"font-ui text-xs uppercase tracking-[0.2em] text-[color:var(--muted)]",children:"About body"}),(0,t.jsx)("textarea",{value:B.aboutBody,onChange:e=>F(t=>({...t,aboutBody:e.target.value})),rows:3,className:"w-full rounded-lg border border-[color:var(--muted)] bg-transparent px-3 py-2"})]}),(0,t.jsxs)("label",{className:"space-y-2 text-sm",children:[(0,t.jsx)("span",{className:"font-ui text-xs uppercase tracking-[0.2em] text-[color:var(--muted)]",children:"Contact label"}),(0,t.jsx)("input",{value:B.contactLabel,onChange:e=>F(t=>({...t,contactLabel:e.target.value})),className:"w-full rounded-lg border border-[color:var(--muted)] bg-transparent px-3 py-2"})]}),(0,t.jsxs)("label",{className:"space-y-2 text-sm md:col-span-2",children:[(0,t.jsx)("span",{className:"font-ui text-xs uppercase tracking-[0.2em] text-[color:var(--muted)]",children:"Contact text"}),(0,t.jsx)("input",{value:B.contactText,onChange:e=>F(t=>({...t,contactText:e.target.value})),className:"w-full rounded-lg border border-[color:var(--muted)] bg-transparent px-3 py-2"})]}),(0,t.jsxs)("label",{className:"space-y-2 text-sm",children:[(0,t.jsx)("span",{className:"font-ui text-xs uppercase tracking-[0.2em] text-[color:var(--muted)]",children:"Contact email"}),(0,t.jsx)("input",{value:B.contactEmail,onChange:e=>F(t=>({...t,contactEmail:e.target.value})),className:"w-full rounded-lg border border-[color:var(--muted)] bg-transparent px-3 py-2"})]})]}),(0,t.jsxs)("div",{className:"mt-8 grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,t.jsxs)("label",{className:"space-y-2 text-sm",children:[(0,t.jsx)("span",{className:"font-ui text-xs uppercase tracking-[0.2em] text-[color:var(--muted)]",children:"Hero height"}),(0,t.jsx)("input",{type:"range",min:220,max:420,value:er,onChange:e=>es(Number(e.target.value)),className:"w-full"}),(0,t.jsxs)("p",{className:"text-xs text-[color:var(--ink)]/70",children:[er,"px"]})]}),(0,t.jsxs)("label",{className:"space-y-2 text-sm",children:[(0,t.jsx)("span",{className:"font-ui text-xs uppercase tracking-[0.2em] text-[color:var(--muted)]",children:"Hero scale"}),(0,t.jsx)("input",{type:"range",min:100,max:150,value:Math.round(100*en),onChange:e=>eo(Number(e.target.value)/100),className:"w-full"}),(0,t.jsxs)("p",{className:"text-xs text-[color:var(--ink)]/70",children:[Math.round(100*en),"%"]})]}),(0,t.jsxs)("label",{className:"space-y-2 text-sm",children:[(0,t.jsx)("span",{className:"font-ui text-xs uppercase tracking-[0.2em] text-[color:var(--muted)]",children:"Album image height"}),(0,t.jsx)("input",{type:"range",min:120,max:260,value:ei,onChange:e=>ed(Number(e.target.value)),className:"w-full"}),(0,t.jsxs)("p",{className:"text-xs text-[color:var(--ink)]/70",children:[ei,"px"]})]}),(0,t.jsxs)("label",{className:"space-y-2 text-sm",children:[(0,t.jsx)("span",{className:"font-ui text-xs uppercase tracking-[0.2em] text-[color:var(--muted)]",children:"Gallery scale"}),(0,t.jsx)("input",{type:"range",min:90,max:110,value:Math.round(100*ec),onChange:e=>eu(Number(e.target.value)/100),className:"w-full"}),(0,t.jsxs)("p",{className:"text-xs text-[color:var(--ink)]/70",children:[Math.round(100*ec),"%"]})]})]})]}),(0,t.jsxs)("section",{id:"design",className:"border-t border-[color:var(--muted)]/40 px-6 py-6",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-ui text-xs uppercase tracking-[0.25em] text-[color:var(--muted)]",children:"design studio"}),(0,t.jsx)("h3",{className:"font-display text-2xl",children:"Palette, fonts, effects"})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-4 py-2 font-ui text-xs uppercase tracking-[0.2em]",onClick:()=>{tV()},children:"copy sync json"}),(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-4 py-2 font-ui text-xs uppercase tracking-[0.2em]",onClick:()=>{let e=window.prompt("Paste sync JSON");if(e)try{let t=JSON.parse(e);Array.isArray(t.albums)&&(t.albums=t.albums.map((e,t)=>g(e??{},t)));let l=tJ(t);localStorage.setItem($,JSON.stringify(l)),localStorage.setItem("sunday-album-content",JSON.stringify(l.content??B)),_(l),alert("Sync JSON imported. Reloading."),window.location.reload()}catch{alert("Invalid sync JSON.")}},children:"import sync json"}),(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-4 py-2 font-ui text-xs uppercase tracking-[0.2em] disabled:opacity-50",onClick:tm,disabled:0===ee.length,children:"undo"}),(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-4 py-2 font-ui text-xs uppercase tracking-[0.2em] disabled:opacity-50",onClick:tx,disabled:0===el.length,children:"redo"})]})]}),(0,t.jsxs)("div",{className:"mt-6 grid gap-6 lg:grid-cols-2",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"font-display text-lg",children:"Theme presets"}),(0,t.jsx)("div",{className:"grid gap-3 sm:grid-cols-2",children:E.map(e=>(0,t.jsxs)("button",{type:"button",onClick:()=>{tc(),X(to(e))},onMouseEnter:()=>Y(to(e)),onMouseLeave:()=>Y(null),className:"rounded-xl border border-[color:var(--muted)] p-4 text-left transition-transform hover:-translate-y-0.5",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"h-5 w-5 rounded-full border border-white/40",style:{background:e.palette.paper}}),(0,t.jsx)("span",{className:"h-5 w-5 rounded-full border border-white/40",style:{background:e.palette.paper2}}),(0,t.jsx)("span",{className:"h-5 w-5 rounded-full border border-white/40",style:{background:e.palette.accent}}),(0,t.jsx)("span",{className:"h-5 w-5 rounded-full border border-white/40",style:{background:e.palette.ink}})]}),(0,t.jsx)("p",{className:"mt-3 font-display text-base",children:e.name})]},e.id))})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"font-display text-lg",children:"Palette"}),(0,t.jsxs)("div",{className:"grid gap-3",children:[[{key:"paper",label:"Paper"},{key:"paper2",label:"Paper alt"},{key:"ink",label:"Ink"},{key:"accent",label:"Accent"},{key:"muted",label:"Muted"},{key:"olive",label:"Olive"}].map(e=>(0,t.jsxs)("label",{className:"space-y-2 text-sm",children:[(0,t.jsx)("span",{className:"font-ui text-xs uppercase tracking-[0.2em] text-[color:var(--muted)]",children:e.label}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("input",{type:"color",value:Q[e.key],onMouseEnter:()=>Y(to({palette:Q,fonts:V.fonts,effects:V.effects})),onMouseLeave:()=>Y(null),onFocus:()=>{tu(),Y(to({palette:Q,fonts:V.fonts,effects:V.effects}))},onBlur:()=>{tp(),Y(null)},onChange:t=>Z(l=>{let a={...l,[e.key]:t.target.value};return Y(to({palette:a,fonts:V.fonts,effects:V.effects})),a}),className:"h-10 w-12 rounded-lg border border-[color:var(--muted)] bg-transparent"}),(0,t.jsx)("input",{type:"text",value:Q[e.key],onMouseEnter:()=>Y(to({palette:Q,fonts:V.fonts,effects:V.effects})),onMouseLeave:()=>Y(null),onFocus:()=>{tu(),Y(to({palette:Q,fonts:V.fonts,effects:V.effects}))},onBlur:()=>{tp(),Y(null)},onChange:t=>Z(l=>{let a={...l,[e.key]:t.target.value};return Y(to({palette:a,fonts:V.fonts,effects:V.effects})),a}),className:"w-full rounded-lg border border-[color:var(--muted)] bg-transparent px-3 py-2 font-ui text-xs uppercase tracking-[0.2em]"})]})]},e.key)),(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-4 py-2 font-ui text-xs uppercase tracking-[0.2em]",onClick:()=>{tc(),X(e=>({...e,palette:{...Q}})),Y(null)},children:"apply palette"})]})]})]}),(0,t.jsxs)("div",{className:"mt-8 grid gap-6 lg:grid-cols-2",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"font-display text-lg",children:"Fonts"}),(0,t.jsxs)("div",{className:"grid gap-3",children:[(0,t.jsxs)("label",{className:"space-y-2 text-sm",children:[(0,t.jsx)("span",{className:"font-ui text-xs uppercase tracking-[0.2em] text-[color:var(--muted)]",children:"Display font"}),(0,t.jsx)("select",{className:"w-full rounded-lg border border-[color:var(--muted)] bg-transparent px-3 py-2",value:V.fonts.display,onFocus:tu,onBlur:tp,onChange:e=>X(t=>({...t,fonts:{...t.fonts,display:e.target.value}})),children:N.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.id))})]}),(0,t.jsx)("div",{className:"grid gap-2 sm:grid-cols-2",children:N.map(e=>(0,t.jsxs)("button",{type:"button",className:"rounded-lg border border-[color:var(--muted)] px-3 py-2 text-left",onClick:()=>{tc(),X(t=>({...t,fonts:{...t.fonts,display:e.value}}))},onMouseEnter:()=>Y(to({palette:V.palette,fonts:{...V.fonts,display:e.value},effects:V.effects})),onMouseLeave:()=>Y(null),children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-[0.2em] text-[color:var(--muted)]",children:e.label}),(0,t.jsx)("p",{className:"mt-1 text-lg",style:{fontFamily:e.value},children:"Sunday Album"})]},e.id))}),(0,t.jsxs)("label",{className:"space-y-2 text-sm",children:[(0,t.jsx)("span",{className:"font-ui text-xs uppercase tracking-[0.2em] text-[color:var(--muted)]",children:"Body font"}),(0,t.jsx)("select",{className:"w-full rounded-lg border border-[color:var(--muted)] bg-transparent px-3 py-2",value:V.fonts.body,onFocus:tu,onBlur:tp,onChange:e=>X(t=>({...t,fonts:{...t.fonts,body:e.target.value}})),children:w.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.id))})]}),(0,t.jsx)("div",{className:"grid gap-2 sm:grid-cols-2",children:w.map(e=>(0,t.jsxs)("button",{type:"button",className:"rounded-lg border border-[color:var(--muted)] px-3 py-2 text-left",onClick:()=>{tc(),X(t=>({...t,fonts:{...t.fonts,body:e.value}}))},onMouseEnter:()=>Y(to({palette:V.palette,fonts:{...V.fonts,body:e.value},effects:V.effects})),onMouseLeave:()=>Y(null),children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-[0.2em] text-[color:var(--muted)]",children:e.label}),(0,t.jsx)("p",{className:"mt-1 text-sm",style:{fontFamily:e.value},children:"A gentle flow of time, preserved in sequence."})]},e.id))})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-4 pb-6 border-b border-[color:var(--muted)]/20 mb-6",children:[(0,t.jsx)("h4",{className:"font-display text-lg",children:"Paper Texture"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-2",children:C.map(e=>(0,t.jsxs)("button",{type:"button",className:`relative flex h-20 w-full flex-col justify-end overflow-hidden rounded-lg border text-left transition-all hover:scale-[1.02] ${V.texture===e.id?"border-[color:var(--accent)] ring-1 ring-[color:var(--accent)] shadow-md":"border-[color:var(--muted)]"}`,onClick:()=>{tc(),X(t=>({...t,texture:e.id}))},onMouseEnter:()=>Y(to({...V,texture:e.id})),onMouseLeave:()=>Y(null),children:[(0,t.jsx)("div",{className:"absolute inset-0 z-0 bg-[color:var(--paper)]",style:{backgroundImage:e.value,backgroundSize:e.size}}),(0,t.jsx)("span",{className:"relative z-10 font-ui text-[10px] uppercase tracking-wider text-[color:var(--ink)] bg-white/60 px-1.5 py-0.5 rounded-tr-md rounded-bl-md backdrop-blur-sm self-start",children:e.label})]},e.id))})]}),(0,t.jsx)("h4",{className:"font-display text-lg",children:"Text effects"}),(0,t.jsxs)("div",{className:"grid gap-3",children:[(0,t.jsxs)("label",{className:"space-y-2 text-sm",children:[(0,t.jsx)("span",{className:"font-ui text-xs uppercase tracking-[0.2em] text-[color:var(--muted)]",children:"Display"}),(0,t.jsx)("select",{className:"w-full rounded-lg border border-[color:var(--muted)] bg-transparent px-3 py-2",value:V.effects.display,onFocus:tu,onBlur:tp,onChange:e=>X(t=>({...t,effects:{...t.effects,display:e.target.value}})),children:k.map(e=>(0,t.jsx)("option",{value:e.id,onMouseEnter:()=>Y(to({palette:V.palette,fonts:V.fonts,effects:{...V.effects,display:e.id}})),onMouseLeave:()=>Y(null),children:e.label},e.id))})]}),(0,t.jsxs)("label",{className:"space-y-2 text-sm",children:[(0,t.jsx)("span",{className:"font-ui text-xs uppercase tracking-[0.2em] text-[color:var(--muted)]",children:"Body"}),(0,t.jsx)("select",{className:"w-full rounded-lg border border-[color:var(--muted)] bg-transparent px-3 py-2",value:V.effects.body,onFocus:tu,onBlur:tp,onChange:e=>X(t=>({...t,effects:{...t.effects,body:e.target.value}})),children:k.map(e=>(0,t.jsx)("option",{value:e.id,onMouseEnter:()=>Y(to({palette:V.palette,fonts:V.fonts,effects:{...V.effects,body:e.id}})),onMouseLeave:()=>Y(null),children:e.label},e.id))})]}),(0,t.jsxs)("label",{className:"space-y-2 text-sm",children:[(0,t.jsx)("span",{className:"font-ui text-xs uppercase tracking-[0.2em] text-[color:var(--muted)]",children:"Labels"}),(0,t.jsx)("select",{className:"w-full rounded-lg border border-[color:var(--muted)] bg-transparent px-3 py-2",value:V.effects.label,onFocus:tu,onBlur:tp,onChange:e=>X(t=>({...t,effects:{...t.effects,label:e.target.value}})),children:k.map(e=>(0,t.jsx)("option",{value:e.id,onMouseEnter:()=>Y(to({palette:V.palette,fonts:V.fonts,effects:{...V.effects,label:e.id}})),onMouseLeave:()=>Y(null),children:e.label},e.id))})]})]}),(0,t.jsxs)("div",{className:"rounded-lg border border-[color:var(--muted)] p-4",children:[(0,t.jsx)("p",{className:`font-display text-lg ${tv}`,children:"Headline preview"}),(0,t.jsx)("p",{className:`mt-2 text-sm text-[color:var(--ink)]/70 ${ty}`,children:"Body preview with the current palette and font settings."}),(0,t.jsx)("p",{className:`mt-2 font-ui text-xs uppercase tracking-[0.2em] ${tj}`,children:"Label preview"})]})]})]}),(0,t.jsxs)("div",{className:"mt-8 flex flex-wrap items-center justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"text-sm text-[color:var(--ink)]/70",children:["Editing theme for: ",lo?.title??"No album"]}),li?(0,t.jsx)("p",{className:"text-xs uppercase tracking-[0.2em] text-[color:var(--olive)]",children:"Album override active"}):null]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-4 py-2 font-ui text-xs uppercase tracking-[0.2em]",onClick:()=>{tc(),eF&&J(e=>({...e,[eF]:to(V)}))},children:"apply to current album"}),(0,t.jsx)("button",{type:"button",className:"rounded-full bg-[color:var(--accent)] px-4 py-2 font-ui text-xs uppercase tracking-[0.2em] text-[color:var(--paper)]",onClick:()=>{tc(),W(to(V))},children:"apply to all albums"}),li?(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-4 py-2 font-ui text-xs uppercase tracking-[0.2em]",onClick:()=>{tc(),J(e=>{let t={...e};return delete t[eF],t}),X(H)},children:"use global"}):null]})]})]})]})})})})}),ta):null,(0,t.jsx)(d,{content:B,setContent:F,galleryItems:tR,albums:eP,selectedAlbumId:eF,uploadsCount:eA.length,isEditMode:eW,isGallerySelectOpen:eq,selectedGalleryIds:eV,pendingGalleryDelete:eK,galleryScale:ec,openMenuId:eg,setOpenMenuId:ev,setIsGallerySelectOpen:eJ,setPendingGalleryDelete:eY,closeSelection:()=>{eJ(!1),eX([]),eY(null)},toggleGallerySelection:e=>{eX(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},confirmGalleryDelete:()=>{if(!eK)return;let e=eA.map(e=>e.id);"all"===eK?e.forEach(e=>t3(e)):eV.filter(t=>e.includes(t)).forEach(e=>t3(e)),eY(null),eX([])},handleGalleryClick:e=>{ev(null),eQ.current&&window.clearTimeout(eQ.current),eQ.current=window.setTimeout(()=>{if(!eq){let t=tR.find(t=>t.id===e);if(t?.albumId){eU(t.albumId),document.getElementById("albums")?.scrollIntoView({behavior:"smooth"});return}let l=eP.find(e=>e.id===t?.id);l?(eU(l.id),document.getElementById("albums")?.scrollIntoView({behavior:"smooth"})):tW(e)}eQ.current=null},200)},handleGalleryAlbumDoubleClick:e=>{if(eQ.current&&(window.clearTimeout(eQ.current),eQ.current=null),!eW)return;let t=eP.find(t=>t.id===e);if(t){let e=tD[t.id];if(e&&e.length>0)return void tW(e[0].id,e)}eQ.current&&(window.clearTimeout(eQ.current),eQ.current=null),eW&&eJ(!0)},addFiles:t1,updateGalleryTitle:(e,t)=>{e===t_.id?tP?t4(tP.id,{title:t}):F(e=>({...e,heroCardTitle:t})):eP.some(t=>t.id===e)?t4(e,{title:t}):eO.some(t=>t.id===e)?t8(e,{title:t}):eA.some(t=>t.id===e)&&t5(e,{title:t})},handleMoveToAlbum:ls,setAlbumCoverFromItem:t6,handleDeleteItem:ln,openLightbox:tW,setEditorTargetId:eC,setNoteEditingId:ew,getMediaKey:t7,resolveText:tf,updateOverride:tb,resolveAssetSrc:b,getMediaStyle:lt,displayEffectClass:tv,labelEffectClass:tj,bodyEffectClass:ty,EditableText:lp}),(0,t.jsx)(i,{content:B,setContent:F,albums:eP,visibleAlbums:tL,uploadsByAlbum:tD,uploadCounts:tT,albumMediaCounts:t$,albumImageHeight:ei,albumUploadThumbHeight:lu,isEditMode:eW,selectedAlbumId:eF,resolveText:tf,updateOverride:tb,formatAlbumCount:e=>{let t=t$[e];if(!t)return"0 photos";let l=[];return l.push(`${t.images} photo${1===t.images?"":"s"}`),t.videos>0&&l.push(`${t.videos} video${1===t.videos?"":"s"}`),l.join(" 路 ")},updateAlbum:t4,requestDeleteAlbum:tX,requestDeleteUpload:tK,openLightbox:tW,handleFileDragOver:t2,handleCoverDrop:(e,t)=>{if(!eW)return;e.preventDefault(),e.stopPropagation();let l=e.dataTransfer.files;if(l&&l.length>0)return void t1(l,t);let a=e.dataTransfer.getData("text/plain");a&&t4(t,{coverId:a})},handleCoverDragStart:t0,addFiles:t1,resolveAssetSrc:b,getMediaStyle:lt,displayEffectClass:tv,labelEffectClass:tj,bodyEffectClass:ty,EditableText:lp,openFlipPreview:eD}),(0,t.jsx)(p,{content:B,setContent:F,albums:eP,selectedAlbum:lo,selectedAlbumId:eF,setSelectedAlbumId:eU,newAlbumTitle:eG,setNewAlbumTitle:eH,isDragging:ez,setIsDragging:eB,uploadsForSelectedAlbum:ld,uploadsByAlbum:tD,uploadPreviewHeight:lc,isEditMode:eW,resolveText:tf,updateOverride:tb,createAlbum:()=>{let e=eG.trim();if(!e)return;let t=new Date,l=t.toLocaleString("en-US",{month:"short",year:"numeric"}),a=`album-${e.toLowerCase().replace(/\s+/g,"-")}-${t.getTime()}`,r={id:a,title:e,count:"0 uploads",date:l,mood:"New collection.",privacy:"Private link",src:"/media/album-winter-kitchen.svg",alt:`${e} cover`,type:"image"};eM(e=>[r,...e]),eU(a),eH("")},addFiles:t1,handleCoverDragStart:t0,updateAlbum:t4,openLightbox:tW,requestDeleteUpload:tK,resolveAssetSrc:b,getMediaStyle:lt,displayEffectClass:tv,labelEffectClass:tj,bodyEffectClass:ty,EditableText:lp}),(0,t.jsx)(u,{content:B,setContent:F,visibleTimeline:lm,isEditMode:eW,resolveText:tf,updateOverride:tb,updateTimelineItem:t8,requestDeleteTimeline:tY,openLightbox:tW,resolveAssetSrc:b,displayEffectClass:tv,labelEffectClass:tj,bodyEffectClass:ty,EditableText:lp,uploads:eA}),(0,t.jsx)(s,{content:B,setContent:F,resolveText:tf,updateOverride:tb,displayEffectClass:tv,labelEffectClass:tj,bodyEffectClass:ty,EditableText:lp})]})]}),m?(0,t.jsx)("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-[color:var(--ink)]/70 p-6",children:(0,t.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),"Bluesky"===T){n("edit"),I(!1),M(""),D("");return}M("Password not recognized.")},className:"paper-card w-full max-w-md space-y-4 p-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(lp,{as:"p",value:tf("auth.kicker","secure access"),onChange:e=>tb("auth.kicker",e),className:`font-ui text-xs uppercase tracking-[0.25em] text-[color:var(--muted)] ${tj}`}),(0,t.jsx)(lp,{as:"h3",value:tf("auth.title","Enter password"),onChange:e=>tb("auth.title",e),className:`font-display text-2xl ${tv}`}),(0,t.jsx)(lp,{as:"p",value:tf("auth.note","Enter the edit password to change content."),onChange:e=>tb("auth.note",e),className:`text-sm text-[color:var(--ink)]/70 ${ty}`})]}),(0,t.jsx)("input",{type:"password",value:T,onChange:e=>D(e.target.value),className:"w-full rounded-lg border border-[color:var(--muted)] bg-transparent px-3 py-2",placeholder:tf("auth.placeholder","Password"),autoFocus:!0}),P?(0,t.jsx)("p",{className:"text-sm text-[color:var(--accent)]",children:P}):null,(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-4 py-2 font-ui text-xs uppercase tracking-[0.2em]",onClick:()=>I(!1),children:(0,t.jsx)(lp,{as:"span",value:tf("auth.cancel","cancel"),onChange:e=>tb("auth.cancel",e),className:tj,editable:!1})}),(0,t.jsx)("button",{type:"submit",className:"rounded-full bg-[color:var(--accent)] px-5 py-2 font-ui text-xs uppercase tracking-[0.2em] text-[color:var(--paper)]",children:(0,t.jsx)(lp,{as:"span",value:tf("auth.unlock","unlock"),onChange:e=>tb("auth.unlock",e),className:tj,editable:!1})})]})]})}):null,e$?(0,t.jsx)(o,{albumTitle:eP.find(e=>e.id===e$)?.title??"Album",items:tD[e$]??[],onClose:()=>eD(null),resolveAssetSrc:b}):null,tG?(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-[color:var(--ink)]/70 p-6",children:[(0,t.jsx)("button",{type:"button",className:"absolute inset-0","aria-label":"Close lightbox",onClick:()=>{tU(null),tB([])}}),(0,t.jsx)("div",{className:"relative z-10 w-full max-w-6xl",children:(0,t.jsxs)("div",{className:"paper-card relative overflow-hidden p-3",children:[eW?(0,t.jsxs)("div",{className:"absolute left-4 top-4 z-20",children:[(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] bg-[color:var(--paper)] px-3 py-2 font-ui text-xs uppercase tracking-[0.2em]",onClick:()=>ej(e=>!e),children:"menu"}),ey?(0,t.jsx)("div",{className:"mt-2 w-64 rounded-xl border border-[color:var(--muted)] bg-[color:var(--paper)] p-3 text-xs uppercase tracking-[0.18em] text-[color:var(--ink)] shadow-[0_18px_30px_rgba(43,39,35,0.12)]",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[10px] text-[color:var(--muted)]",children:"edit"}),(0,t.jsxs)("div",{className:"mt-2 flex flex-wrap gap-2",children:[(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-3 py-1",onClick:()=>{eC(t7(tG)),ej(!1)},children:"crop"}),(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-3 py-1",onClick:()=>{eC(t7(tG)),ej(!1)},children:"resize"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[10px] text-[color:var(--muted)]",children:"move"}),(0,t.jsxs)("select",{className:"mt-2 w-full rounded-full border border-[color:var(--muted)] bg-transparent px-3 py-1",defaultValue:"",disabled:!tH,onChange:e=>{let t=e.currentTarget.value;t&&tH&&(ls(tH,t),e.currentTarget.value="",ej(!1))},children:[(0,t.jsx)("option",{value:"",disabled:!0,children:"select album"}),eP.map(e=>(0,t.jsx)("option",{value:e.id,children:e.title},`move-${tG.id}-${e.id}`))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[10px] text-[color:var(--muted)]",children:"set cover"}),(0,t.jsxs)("select",{className:"mt-2 w-full rounded-full border border-[color:var(--muted)] bg-transparent px-3 py-1",defaultValue:"",disabled:!tH,onChange:e=>{let t=e.currentTarget.value;t&&tH&&(t6(t,tH),e.currentTarget.value="",ej(!1))},children:[(0,t.jsx)("option",{value:"",disabled:!0,children:"select album"}),eP.map(e=>(0,t.jsx)("option",{value:e.id,children:e.title},`cover-${tG.id}-${e.id}`))]})]}),(0,t.jsx)("div",{children:(0,t.jsx)("button",{type:"button",className:"w-full rounded-full border border-[color:var(--muted)] px-3 py-2",onClick:()=>{ew(t7(tG)),ej(!1)},children:"add text"})}),(0,t.jsx)("div",{children:(0,t.jsx)("button",{type:"button",className:"w-full rounded-full border border-[color:var(--muted)] px-3 py-2",onClick:()=>{ln(tH??tG,"lightbox"),ej(!1)},children:"delete"})})]})}):null]}):null,(0,t.jsx)("div",{className:"relative h-[75vh] w-full overflow-hidden rounded-xl bg-transparent",onClick:()=>{eW&&eE(e=>!e)},children:"video"===tG.type&&tG.videoSrc?(0,t.jsx)("video",{controls:!0,className:"h-full w-full rounded-xl object-cover",src:b(tG.videoSrc),preload:"metadata",style:lt(tG)}):tG.isLocal?(0,t.jsx)("img",{src:b(tG.src),alt:tG.alt,className:"h-full w-full rounded-xl object-cover",style:lt(tG)}):(0,t.jsx)(l.default,{src:b(tG.src),alt:tG.alt,fill:!0,className:"object-cover",style:lt(tG)})}),eW||null===tF?null:(0,t.jsx)("div",{className:"mt-3 flex justify-center",children:(0,t.jsxs)("span",{className:"rounded-full bg-[color:var(--paper-2)] px-4 py-1 font-ui text-xs uppercase tracking-[0.2em] text-[color:var(--ink)]",children:[tF+1," of ",tz.length]})}),tz.length>1?(0,t.jsxs)("div",{className:"mt-4 flex items-center gap-3",children:[(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-3 py-2",onPointerDown:()=>tQ("left"),onPointerUp:tZ,onPointerLeave:tZ,"aria-label":"Scroll thumbnails left",children:"prev"}),(0,t.jsx)("div",{ref:eZ,className:"thumb-deck overflow-hidden pb-3",onPointerDown:()=>{e1.current=!1,e3.current=!1,e0.current=0,e2.current=0},children:tz.map((e,a)=>{let r=a===tF,s=eW&&tz.every(e=>!!e.albumId);return(0,t.jsx)("button",{type:"button",draggable:s,onDragStart:()=>e6(a),onDragOver:e=>{s&&e.preventDefault()},onDrop:e=>{s&&(e.preventDefault(),null!==e5)&&(e5!==a&&(tB(e=>{let t,l,r=[...e],[s]=r.splice(e5,1);return r.splice(a,0,s),l=new Set(t=r.map(e=>e.id)),r.every(e=>e.isLocal)&&eL(e=>{let a=t.map(t=>e.find(e=>e.id===t)).filter(e=>!!e),r=!1,s=[];for(let t of e){if(!l.has(t.id)){s.push(t);continue}r||(s.push(...a),r=!0)}return r||s.push(...a),s}),r}),tU(e=>null===e?e:e===e5?a:e5<a&&e>e5&&e<=a?e-1:e5>a&&e>=a&&e<e5?e+1:e)),e6(null))},onDragEnd:()=>e6(null),onClick:()=>{if(e1.current){e1.current=!1;return}tU(a)},className:`thumb-card h-16 w-24 flex-shrink-0 overflow-hidden rounded-lg border ${r?"border-[color:var(--accent)]":"border-[color:var(--muted)]/60"} ${e5===a&&s?"opacity-60":""}`,"aria-label":`View ${e.title}`,children:"video"===e.type&&e.videoSrc?(0,t.jsx)("video",{className:"h-full w-full object-cover",src:b(e.videoSrc),muted:!0,playsInline:!0,preload:"none",style:lt(e)}):e.isLocal?(0,t.jsx)("img",{src:b(e.src),alt:e.alt,className:"h-full w-full object-cover",style:lt(e)}):(0,t.jsx)(l.default,{src:b(e.src),alt:e.alt,width:160,height:120,className:"h-full w-full object-cover",style:lt(e)})},`${e.id}-thumb-${a}`)})}),(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-3 py-2",onPointerDown:()=>tQ("right"),onPointerUp:tZ,onPointerLeave:tZ,"aria-label":"Scroll thumbnails right",children:"next"})]}):null,eW&&eS?(0,t.jsxs)("div",{className:"mt-4 rounded-lg border border-[color:var(--muted)]/50 bg-[color:var(--paper-2)]/70 px-4 py-3",children:[(0,t.jsx)("p",{className:"font-ui text-xs uppercase tracking-[0.2em] text-[color:var(--muted)]",children:"source"}),(0,t.jsx)("p",{className:"text-sm text-[color:var(--ink)]/80",children:(e=>{if(e.id===t_.id)return tP?`Hero \xb7 ${tP.title}`:"Hero 路 Sunday Light";let t=eP.find(t=>t.id===e.id);if(t)return`Album \xb7 ${t.title}`;if(eO.find(t=>t.id===e.id))return"Timeline";if(e.albumId){let t=eP.find(t=>t.id===e.albumId);return t?`Album \xb7 ${t.title}`:"Album 路 Unsorted"}return"Upload"})(tG)})]}):null,eW&&ek===t7(tG)?(0,t.jsxs)("div",{className:"mt-4 rounded-lg border border-[color:var(--muted)]/50 bg-[color:var(--paper-2)]/70 px-4 py-3",children:[(0,t.jsx)("p",{className:"font-ui text-xs uppercase tracking-[0.2em] text-[color:var(--muted)]",children:"edit image"}),(0,t.jsxs)("div",{className:"mt-3 grid gap-3 sm:grid-cols-4",children:[(0,t.jsxs)("label",{className:"text-xs uppercase tracking-[0.2em] text-[color:var(--ink)]/70",children:["resize",(0,t.jsx)("input",{type:"range",min:.5,max:2.5,step:.01,value:le(tG).scale,onChange:e=>ll(tG,{scale:Number(e.currentTarget.value)}),className:"mt-2 w-full"})]}),(0,t.jsxs)("label",{className:"text-xs uppercase tracking-[0.2em] text-[color:var(--ink)]/70",children:["crop x",(0,t.jsx)("input",{type:"range",min:-50,max:50,step:1,value:le(tG).offsetX,onChange:e=>ll(tG,{offsetX:Number(e.currentTarget.value)}),className:"mt-2 w-full"})]}),(0,t.jsxs)("label",{className:"text-xs uppercase tracking-[0.2em] text-[color:var(--ink)]/70",children:["crop y",(0,t.jsx)("input",{type:"range",min:-50,max:50,step:1,value:le(tG).offsetY,onChange:e=>ll(tG,{offsetY:Number(e.currentTarget.value)}),className:"mt-2 w-full"})]}),(0,t.jsxs)("div",{className:"text-xs uppercase tracking-[0.2em] text-[color:var(--ink)]/70",children:["rotate",(0,t.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-2 py-1 text-[10px]",onClick:()=>la(tG,-90),children:"left"}),(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-2 py-1 text-[10px]",onClick:()=>la(tG,90),children:"right"})]}),(0,t.jsxs)("p",{className:"mt-2 text-[10px] text-[color:var(--ink)]/60",children:[le(tG).rotation,"掳"]})]})]}),(0,t.jsxs)("div",{className:"mt-3 flex flex-wrap gap-2",children:[(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-3 py-1 text-xs uppercase tracking-[0.2em]",onClick:()=>{let e;return e=t7(tG),void ef(t=>{let l={...t};return delete l[e],l})},children:"reset"}),(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-3 py-1 text-xs uppercase tracking-[0.2em]",onClick:()=>eC(null),children:"close"})]})]}):null,(0,t.jsxs)("div",{className:"mt-4 flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(lp,{as:"p",value:tG.title,onChange:e=>{tG.id===t_.id?tP?t4(tP.id,{title:e}):F(t=>{let l={...t,heroCardTitle:e};return localStorage.setItem("sunday-album-content",JSON.stringify(l)),l}):eP.find(e=>e.id===tG.id)?t4(tG.id,{title:e}):eO.find(e=>e.id===tG.id)&&t8(tG.id,{title:e})},className:`font-display text-2xl ${tv}`}),eW&&tG.isLocal&&tG.alt?(0,t.jsx)("p",{className:"text-xs uppercase tracking-[0.2em] text-[color:var(--muted)]",children:tG.alt}):null,tG.detail?(0,t.jsx)(lp,{as:"p",value:tG.detail,onChange:e=>{tG.id===t_.id?tP?t4(tP.id,{mood:e}):F(t=>{let l={...t,heroCardDetail:e};return localStorage.setItem("sunday-album-content",JSON.stringify(l)),l}):eO.find(e=>e.id===tG.id)&&t8(tG.id,{detail:e})},className:`text-sm text-[color:var(--ink)]/70 ${ty}`}):null,"video"!==tG.type||tG.videoSrc?null:(0,t.jsx)(lp,{as:"p",value:tf("lightbox.videoSoon","Video file coming soon."),onChange:e=>tb("lightbox.videoSoon",e),className:`text-sm text-[color:var(--ink)]/60 ${ty}`}),eW&&eN===t7(tG)?(0,t.jsx)("textarea",{value:lr(tG),onChange:e=>{var t;let l;return t=e.target.value,l=t7(tG),void eh(e=>({...e,[l]:t}))},rows:3,className:"mt-3 w-full rounded-lg border border-[color:var(--muted)] bg-transparent px-3 py-2 text-sm",placeholder:"Add a note below the image"}):null,!eW&&lr(tG)?(0,t.jsx)("p",{className:`mt-3 text-sm text-[color:var(--ink)]/70 ${ty}`,children:lr(tG)}):null]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 font-ui text-xs uppercase tracking-[0.2em]",children:[(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-4 py-2",onClick:()=>{tU(e=>null===e||0===tz.length?e:(e-1+tz.length)%tz.length)},children:(0,t.jsx)(lp,{as:"span",value:tf("lightbox.previous","previous"),onChange:e=>tb("lightbox.previous",e),className:tj,editable:!1})}),(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-4 py-2",onClick:()=>{tU(e=>null===e||0===tz.length?e:(e+1)%tz.length)},children:(0,t.jsx)(lp,{as:"span",value:tf("lightbox.next","next"),onChange:e=>tb("lightbox.next",e),className:tj,editable:!1})})]})]}),(0,t.jsx)("button",{type:"button",onClick:()=>{tU(null),tB([])},className:"absolute right-6 top-6 rounded-full border border-[color:var(--muted)] bg-[color:var(--paper)] px-3 py-1 font-ui text-xs uppercase tracking-[0.2em]",children:(0,t.jsx)(lp,{as:"span",value:tf("lightbox.close","close"),onChange:e=>tb("lightbox.close",e),className:tj,editable:!1})})]})})]}):null,e8?(0,t.jsx)("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-[color:var(--ink)]/70 p-6",children:(0,t.jsxs)("div",{className:"paper-card w-full max-w-md space-y-4 p-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-ui text-xs uppercase tracking-[0.25em] text-[color:var(--muted)]",children:"confirm delete"}),(0,t.jsxs)("p",{className:`font-display text-2xl ${tv}`,children:["Delete ",e8.label,"?"]}),(0,t.jsx)("p",{className:`text-sm text-[color:var(--ink)]/70 ${ty}`,children:"This action cannot be undone."})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("button",{type:"button",className:"rounded-full border border-[color:var(--muted)] px-4 py-2 font-ui text-xs uppercase tracking-[0.2em]",onClick:()=>e7(null),children:"no"}),(0,t.jsx)("button",{type:"button",className:"rounded-full bg-[color:var(--accent)] px-5 py-2 font-ui text-xs uppercase tracking-[0.2em] text-[color:var(--paper)]",onClick:()=>{if(e8){if("album"===e8.type){let e=e8.id;eA.filter(t=>t.albumId===e).forEach(e=>t3(e.id));let t=eP.filter(t=>t.id!==e),l=eF===e?t[0]?.id??"":eF,a=ep===e?null:ep;eM(t),eU(l),ep===e&&em(null),tG?.id===e&&(tU(null),tB([])),tI({albums:t,selectedAlbumId:l,heroSourceId:a})}else if("timeline"===e8.type){let e=e8.id;e_(t=>t.filter(t=>t.id!==e)),tU(null),tB([])}else"lightbox-upload"===e8.type?tq():t3(e8.id);e7(null)}},children:"yes"})]})]})}):null]})}e.s(["default",()=>B],52683)}]);